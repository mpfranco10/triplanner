{"version":3,"sources":["reportWebVitals.js","reducers/UserReducer.js","Callback/Callback.js","components/modals/HelpModal.js","components/Banner.js","reducers/TripReducer.js","store.js","components/Principal.js","components/map/GMapReact.js","components/map/Mapa.js","components/modals/CustomModal.js","components/modals/CustomModalForCalendar.js","components/images/subway-solid.svg","components/calendar/CustomEvent.js","components/modals/CalendarModal.js","components/calendar/Calendario.js","components/calendar/Itinerario.js","components/modals/BudgetModal.js","components/modals/ChangesSavedModal.js","components/Presupuesto.js","components/Documentos.js","components/modals/ListModal.js","components/shopping/ShopTable.js","components/shopping/ListaCompras.js","components/notas/Nota.js","components/notas/Notas.js","components/Picker.js","components/PrivateRoute.js","App.js","Auth/auth0-provider-with-history.js","index.js"],"names":["reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","initialState","user","userChanged","type","payload","withRouter","props","useAuth0","isLoading","isAuthenticated","error","dispatch","useDispatch","className","message","console","log","push","to","HelpModal","h","pageNumber","Modal","show","onHide","handleClose","Header","closeButton","Title","Body","Footer","Button","variant","onClick","Banner","links","useState","setShow","handleShow","AuthenticationButton","logout","loginWithRedirect","Nav","Link","returnTo","window","location","origin","showLinks","justify","NavDropdown","title","id","Item","Navbar","collapseOnSelect","expand","fixed","Container","fluid","Brand","pathname","state","width","src","height","alt","Toggle","Collapse","selectedTrip","rootReducer","combineReducers","trip","action","persistConfig","key","storage","persistedReducer","persistReducer","configureStore","store","createStore","applyMiddleware","thunk","persistor","persistStore","hourSeconds","daySeconds","timerProps","isPlaying","size","strokeWidth","renderTime","dimension","time","Principal","tripDate","city","endDate","undefined","places","events","objects","getState","this","setState","dateTrip","Date","calendar","startDate","month","toLocaleString","getDate","getFullYear","selectedCity","split","tripId","axios","get","headers","res","resp","data","history","href","stratTime","now","remainingTime","daysDuration","Math","ceil","colors","duration","initialRemainingTime","elapsedTime","onComplete","totalElapsedTime","style","marginTop","Row","Col","Card","marginRight","React","Component","containerStyle","libraries","image","url","myColorList","GMapReact","handleMarkerClick","event","myPlaces","index","findIndex","obj","place","splice","unshift","deletePlace","delete","sortPlaces","criteria","target","value","sort","dynamicSort","handleChangeComplete","color","newImage","hex","replace","colorCode","_id","put","centerMarker","onChange","activeKey","autocomplete","onLoad","bind","onPlaceChanged","resetColors","placeId","getPlace","place_id","some","e","lat","geometry","lng","name","detail","post","property","sortOrder","substr","a","b","aval","bval","forEach","arrayItem","msg","center","zoom","xl","googleMapsApiKey","language","mapContainerStyle","restrictions","country","placeholder","onFocus","boxSizing","border","padding","borderRadius","boxShadow","fontSize","outline","textOverflow","position","left","marginLeft","map","icon","marginBottom","xs","lg","margin","OverlayTrigger","placement","overlay","Popover","as","backgroundColor","borderStyle","paddingTop","display","Accordion","defaultActiveKey","maxHeight","overflowY","eventKey","toString","textDecorationLine","textDecorationColor","textDecorationThickness","ListGroup","formatted_address","opening_hours","weekday_text","text","website","rel","slice","numOfDays","length","Mapa","recenterMap","parseFloat","moment","numDays","diff","selectedCountry","toUpperCase","CustomModal","hideModal","fullname","phone","onSave","handleRemove","onRemove","handleSave","handleValidation","start","end","isMovement","intervals","hexToRgb","placeToSchedule","fromSchedule","includeTime","minutes","parseInt","movement","clone","subtract","alert","onModalClose","handleStartDateChange","startHour","format","quotient","handleEndDateChange","endHour","handleCheckbox","checked","invalidData","errors","minimumHour","lastHour","nextProps","nextState","add","formIsValid","result","exec","r","g","dow","day","opHour","opHours","minWidth","readOnly","disabled","required","ref","el","defaultValue","parentOfPlace","CustomModalForCalendar","uid","toFixed","actionType","Dialog","customEvent","clock","colorString","popover","delay","hide","Tooltip","CalendarModal","unit","calendarStart","backdrop","keyboard","Form","Group","Label","Control","Calendario","handleEventRemove","selectedIntervals","interval","path","canSchedule","scheduled","handleEventUpdate","startString","endString","handleSelect","newIntervals","lastUid","val","minima","colorDate","horas","horaMin","hora1","hora2","horamin1","horamin2","nuevaminima","addedDelta","concat","showModal","onCalendarModalClose","showCalendarModal","openCalendarModal","handleCalendarSave","configurations","m","patchTripCalendar","col","background","colorPlaces","filter","hotel","hotelPlace","durationValue","computeDistances","handleHotelSelection","selected","selectedHotel","placeSelected","computePlacesToSchedule","handleModeChange","transportMode","handleDateChange","colorMoment","trim","handleDeleteFromPath","newOrigin","scheduleVisit","deltaMinima","newMinima","listOfDates","pathSchedule","minimumCalendarHour","changes","newArray","Set","item","x","days","firstDay","endOfWeek","sevents","lastuid","hotelId","newObj","origins","dests","params","destinations","join","mode","matrix","i","status","distance","distanceValue","lastDay","dayFormat","numberOfDays","onIntervalSelect","onIntervalUpdate","onIntervalRemove","scaleUnit","modalComponent","eventComponent","CustomEvent","scaleFormat","startTime","reduce","horizontal","overflowX","whiteSpace","Select","date","Itinerario","renderCalendar","BudgetModal","objName","objDesc","description","objPrice","price","objQuantity","quantity","toEdit","ignore","handleUpdate","maxLength","min","step","ChangesSavedModal","showSaved","Presupuesto","componentDidUpdate","shouldBlockNavigation","onbeforeunload","handleValChange","handlCurrencyChange","localCurrency","handleEdit","elements","edited","total","newTotal","handleIgnore","handleDelete","row","s","handleSaveChanges","document","querySelectorAll","element","when","controlId","column","md","ProgressBar","animated","label","plaintext","Table","striped","bordered","hover","o","Documentos","ListModal","objLink","link","buyed","ShopTable","objectsList","handlePayed","saveList","tableNumber","objList","titleTooltip","ListaCompras","objs","beforeList","afterList","k1","k2","Nota","handleNoteEdit","handleChange","handleNoteEditText","deleteNote","noteId","contentEditable","createRef","tag","Notas","handleAdd","stickyNotes","handleDeleteNote","handleNoteChange","paddingLeft","paddingRight","paddingBottom","Picker","selectTrip","changeTrip","deleteTrip","confirm","trips","userId","promiseOptions","inputValue","callback","mapOptionsToValues","options","option","latitude","longitude","region","countries","isClearable","cities","isDisabled","numOfTrips","handleCountrySelect","handleSubmit","handleCitySelect","userID","sub","code","ranges","preventDefault","toSave","isLoggedIn","onSubmit","justifyContent","editableDateInputs","moveRangeOnFirstSelection","selection","minDate","cacheOptions","loadOptions","theme","neutral5","neutral10","primary","Text","connect","loading","PrivateRoute","component","args","withAuthenticationRequired","onRedirecting","HomePage","fontFamily","class","Img","exact","render","auth","authenticated","Auth0ProviderWithHistory","children","useHistory","domain","clientId","redirectUri","onRedirectCallback","appState","ReactDOM","createBrowserHistory","getElementById"],"mappings":"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","file":"static/js/main.92af2c84.chunk.js","sourcesContent":["const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const initialState = {\r\n  user: {},\r\n};\r\n\r\nexport function userReducer(state = initialState, action) {\r\n  if (action.type === \"user/userChanged\") {\r\n    return { ...state, user: action.payload };\r\n  }\r\n  return state;\r\n}\r\n\r\nexport const userChanged = (user) => ({\r\n  type: \"user/userChanged\",\r\n  payload: user,\r\n});\r\n\r\n// selectors\r\nexport const getUser = (state) => state.user.user;","// src/Callback/Callback.js\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { userChanged } from \"../reducers/UserReducer\";\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nfunction Callback(props) {\r\n  const {\r\n    isLoading,\r\n    isAuthenticated,\r\n    error,\r\n    user,\r\n  } = useAuth0();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  let loading = <div className=\"loading\">\r\n    <div className=\"loader\"></div>\r\n  </div>;\r\n\r\n  if (isLoading) {\r\n    return loading;\r\n  }\r\n  if (error) {\r\n    return <div>Oops... {error.message}</div>;\r\n  }\r\n\r\n  if (isAuthenticated) {\r\n    \r\n  console.log(\"callback called\");\r\n    dispatch(userChanged(user));\r\n    return <Redirect push to=\"/plan\" />\r\n  } else {\r\n    //reset user\r\n    dispatch(userChanged({}));\r\n    return <Redirect push to=\"/\" />\r\n  }\r\n}\r\n\r\nexport default withRouter(Callback);","import Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\nimport React from 'react';\r\n\r\nfunction HelpModal(props) {\r\n    var h = \"\";\r\n    if (props.pageNumber === 1) {\r\n        h = \"En esta sección puede ingresar la información básica de su viaje: el rango de fechas del viaje, el país y la ciudad que desea visitar. Al hacer click en aceptar podrá empezar a planear su viaje. \\n Si ya tiene viajes planeados, puede verlos en la sección mis viajes.\";\r\n    } else if (props.pageNumber === 2) {\r\n        h = \"Para planear su viaje puede buscar los lugares que desee visitar en el mapa, agendarlos en el calendario, agregar listas de compras, presupuesto, y notas. En cada página, encontrará el símnbolo '?', que le ayudará a entender el propósito de cada herramienta.\";\r\n    }\r\n    return (\r\n        <Modal show={props.show} onHide={props.handleClose}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Ayuda</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>{h}</Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"primary\" onClick={props.handleClose}>\r\n                    Entendido\r\n                </Button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default HelpModal;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport Navbar from 'react-bootstrap/Navbar';\r\nimport Nav from 'react-bootstrap/Nav';\r\nimport NavDropdown from 'react-bootstrap/NavDropdown';\r\nimport Container from 'react-bootstrap/Container';\r\nimport HelpModal from './modals/HelpModal';\r\n\r\nfunction Banner(props) {\r\n\r\n  const [show, setShow] = useState(false);\r\n  const handleShow = () => setShow(true);\r\n  const handleClose = () => setShow(false);\r\n\r\n  const { user } = useAuth0();\r\n\r\n  const AuthenticationButton = () => {\r\n    const { isAuthenticated, logout, loginWithRedirect } = useAuth0();\r\n\r\n    return isAuthenticated ? <Nav className=\"justify-content-center\"><Nav.Link className=\"center\">\r\n      <button type=\"button\" className=\"btn btn-info\" data-toggle=\"modal\" data-target=\"#miModal4\" onClick={handleShow}>\r\n        Ayuda\r\n      </button>\r\n    </Nav.Link>\r\n      <Nav.Link className=\"center\">\r\n        <Button variant=\"danger\" onClick={() =>\r\n          logout({\r\n            returnTo: window.location.origin,\r\n          })\r\n        }>\r\n          Cerrar sesión\r\n        </Button>\r\n      </Nav.Link> </Nav> : <Nav className=\"justify-content-center\"><Nav.Link className=\"center\">\r\n        <Button variant=\"success\" onClick={() => loginWithRedirect()}>\r\n          Iniciar sesión\r\n        </Button>\r\n      </Nav.Link> </Nav>;\r\n  };\r\n\r\n  const showLinks = props.showLinks;\r\n  let links;\r\n  if (showLinks) {\r\n    links = (\r\n      <Nav justify className=\"me-auto\">\r\n        <Nav.Link><Link to={`/mytrip`}> Resumen</Link></Nav.Link>\r\n        <Nav.Link><Link to={`/map`}> Mapa</Link></Nav.Link>\r\n        <NavDropdown title=\"Información útil\" id=\"collasible-nav-dropdown\">\r\n          <NavDropdown.Item><Link to={`/list`} className=\"dropdown-item\">Lista de compras</Link></NavDropdown.Item>\r\n          <NavDropdown.Item> <Link to={`/notes`} className=\"dropdown-item\">Notas</Link></NavDropdown.Item>\r\n        </NavDropdown>\r\n        <Nav.Link><Link to={`/schedule`}>Itinerario</Link></Nav.Link>\r\n        <Nav.Link><Link to={`/budget`}>Presupuesto</Link></Nav.Link>\r\n      </Nav>);\r\n  } else {\r\n    links = <Nav justify className=\"me-auto\">\r\n    </Nav>;\r\n  }\r\n\r\n  const pageNumber = showLinks ? 2 : 1;\r\n\r\n  return (<>\r\n    <HelpModal show={show} handleClose={handleClose} pageNumber={pageNumber} />\r\n    <Navbar collapseOnSelect expand=\"lg\" className=\"color\" fixed=\"top\" >\r\n      <Container fluid >\r\n        <Navbar.Brand>\r\n          <Link to={{\r\n            pathname: '/plan',\r\n            state: { user: user }\r\n          }}>\r\n            <img width=\"30\" src=\"logotrip.png\" height=\"30\" className=\"d-inline-block align-top\" alt=\"\"></img>\r\n            <span className=\" logo-pad\">\r\n              TriPlanner </span>\r\n          </Link>\r\n        </Navbar.Brand>\r\n        <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\r\n        <Navbar.Collapse id=\"responsive-navbar-nav\">\r\n          {links}\r\n          <AuthenticationButton />\r\n        </Navbar.Collapse>\r\n      </Container>\r\n    </Navbar>\r\n  </>\r\n  );\r\n\r\n}\r\n\r\nexport default Banner;\r\n\r\n","const initialState = {\r\n    selectedTrip: {},\r\n};\r\n\r\nexport function tripReducer(state = initialState, action) {\r\n    if (action.type === \"trip/selectedChanged\") {\r\n        return { ...state, selectedTrip: action.payload };\r\n    }\r\n    return state;\r\n}\r\n\r\n/* // action creators\r\nexport function updateCurrencyCode(currencyCode = initialState.currencyCode) {\r\n  return (dispatch, getState) => {\r\n    const state = getState();\r\n    const symbols = getSupportedSymbols(state);\r\n    dispatch({ type: \"rate/currencyCodeUpdated\", payload: currencyCode });\r\n    getExchangeRates(currencyCode, symbols).then((rates) => {\r\n      dispatch({ type: \"rate/updateRates\", payload: rates });\r\n    });\r\n  };\r\n} */\r\n\r\nexport const selectedTripChanged = (trip) => ({\r\n    type: \"trip/selectedChanged\",\r\n    payload: trip,\r\n});\r\n\r\n// selectors\r\nexport const getSelectedTrip = (state) => state.trip.selectedTrip;\r\n/* export const getAmount = (state) => state.rate.amount;\r\nexport const getSupportedSymbols = (state) => state.rate.supportedSymbols;\r\nexport const getRates = (state) => state.rate.rates; */","import { createStore, combineReducers, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { persistStore, persistReducer } from 'redux-persist';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nimport { tripReducer } from \"./reducers/TripReducer\";\r\nimport { userReducer } from \"./reducers/UserReducer\";\r\n\r\nconst rootReducer = combineReducers({\r\n    trip: tripReducer,\r\n    user: userReducer,\r\n});\r\n\r\nconst persistConfig = {\r\n    key: 'root',\r\n    storage,\r\n};\r\n\r\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\r\n\r\n\r\nfunction configureStore(initialState = {}) {\r\n    let store = createStore(persistedReducer, applyMiddleware(thunk));\r\n    let persistor = persistStore(store, null, () => {\r\n        // if you want to get restoredState\r\n        //console.log(\"restoredState\", store.getState());\r\n    });\r\n    return { store, persistor }\r\n}\r\n\r\nexport default configureStore;\r\n","import React from 'react';\r\nimport Banner from \"./Banner\"\r\nimport { CountdownCircleTimer } from \"react-countdown-circle-timer\";\r\nimport configureStore from '../store';\r\nimport Card from 'react-bootstrap/Card'\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport axios from 'axios';\r\nimport { BsFillPinMapFill, BsFillCalendarEventFill, BsFillBasket3Fill } from \"react-icons/bs\";\r\n\r\nconst minuteSeconds = 60;\r\nconst hourSeconds = 3600;\r\nconst daySeconds = 86400;\r\n\r\nconst timerProps = {\r\n  isPlaying: true,\r\n  size: 120,\r\n  strokeWidth: 6\r\n};\r\n\r\nconst renderTime = (dimension, time) => {\r\n  return (\r\n    <div className=\"time-wrapper\">\r\n      <div className=\"time\">{time}</div>\r\n      <div>{dimension}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst getTimeSeconds = (time) => (minuteSeconds - time) | 0;\r\nconst getTimeMinutes = (time) => ((time % hourSeconds) / minuteSeconds) | 0;\r\nconst getTimeHours = (time) => ((time % daySeconds) / hourSeconds) | 0;\r\nconst getTimeDays = (time) => (time / daySeconds) | 0;\r\n\r\nconst { store } = configureStore();\r\n\r\nexport default class Principal extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tripDate: '',\r\n      city: '',\r\n      endDate: undefined,\r\n      places: 0,\r\n      events: 0,\r\n      objects: 0,\r\n    };\r\n  }\r\n  componentDidMount() {\r\n\r\n    const trip = store.getState().trip.selectedTrip;\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n      var dateTrip = new Date(trip.calendar.startDate);\r\n      var month = dateTrip.toLocaleString('default', { month: 'long' });\r\n      this.setState({ tripDate: month + ', ' + dateTrip.getDate() + ', ' + dateTrip.getFullYear() });\r\n      this.setState({ city: trip.selectedCity.split(\",\")[0] });\r\n      this.setState({ endDate: dateTrip });\r\n\r\n      var tripId = trip.id;\r\n      axios.get('http://localhost:5000/widgets/' + tripId, //proxy uri\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        }).then(res => {\r\n          const resp = res.data;\r\n          this.setState({ places: resp.places, events: resp.events, objects: resp.objects });\r\n        });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n\r\n  }\r\n  render() {\r\n    if (this.state.endDate === undefined) {\r\n      return (\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\" id=\"banner\">\r\n            <div className=\"col-2 col-offset-0\">\r\n              <Banner />\r\n            </div>\r\n          </div>\r\n          <br></br>\r\n          <br></br>\r\n          <br></br>\r\n          <div className=\"color\">\r\n            <ol className=\"breadcrumb\">\r\n              <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n              <li className=\"breadcrumb-item active\" aria-current=\"page\">Resumen</li>\r\n            </ol>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    const stratTime = Date.now() / 1000; // use UNIX timestamp in seconds\r\n    const endTime = this.state.endDate / 1000;  // use UNIX timestamp in seconds\r\n\r\n    const remainingTime = endTime - stratTime;\r\n    const days = Math.ceil(remainingTime / daySeconds);\r\n    const daysDuration = days * daySeconds;\r\n\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Resumen</li>\r\n          </ol>\r\n        </div>\r\n\r\n        <div className=\"container-fluid\" >\r\n          <div className=\"hero-image-2\">\r\n            <div className=\"hero-text-2\">\r\n              <h1>Mi viaje a {this.state.city}</h1>\r\n              <div className=\"App\">\r\n                <CountdownCircleTimer\r\n                  {...timerProps}\r\n                  colors={[[\"#05668d\"]]}\r\n                  duration={daysDuration}\r\n                  initialRemainingTime={remainingTime}\r\n                >\r\n                  {({ elapsedTime }) =>\r\n                    renderTime(\"días\", getTimeDays(daysDuration - elapsedTime))\r\n                  }\r\n                </CountdownCircleTimer>\r\n                <CountdownCircleTimer\r\n                  {...timerProps}\r\n                  colors={[[\"#679436\"]]}\r\n                  duration={daySeconds}\r\n                  initialRemainingTime={remainingTime % daySeconds}\r\n                  onComplete={(totalElapsedTime) => [\r\n                    remainingTime - totalElapsedTime > hourSeconds\r\n                  ]}\r\n                >\r\n                  {({ elapsedTime }) =>\r\n                    renderTime(\"horas\", getTimeHours(daySeconds - elapsedTime))\r\n                  }\r\n                </CountdownCircleTimer>\r\n                <CountdownCircleTimer\r\n                  {...timerProps}\r\n                  colors={[[\"#000000\"]]}\r\n                  duration={hourSeconds}\r\n                  initialRemainingTime={remainingTime % hourSeconds}\r\n                  onComplete={(totalElapsedTime) => [\r\n                    remainingTime - totalElapsedTime > minuteSeconds\r\n                  ]}\r\n                >\r\n                  {({ elapsedTime }) =>\r\n                    renderTime(\"minutos\", getTimeMinutes(hourSeconds - elapsedTime))\r\n                  }\r\n                </CountdownCircleTimer>\r\n                <CountdownCircleTimer\r\n                  {...timerProps}\r\n                  colors={[[\"#05668d\"]]}\r\n                  duration={minuteSeconds}\r\n                  initialRemainingTime={remainingTime % minuteSeconds}\r\n                  onComplete={(totalElapsedTime) => [\r\n                    remainingTime - totalElapsedTime > 0\r\n                  ]}\r\n                >\r\n                  {({ elapsedTime }) =>\r\n                    renderTime(\"segundos\", getTimeSeconds(elapsedTime))\r\n                  }\r\n                </CountdownCircleTimer>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"container\" style={{ marginTop: '50px' }} >\r\n          <Row>\r\n            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n              <Card className=\"text-center\" style={{ width: '18rem', height: '11rem' }}>\r\n                <Card.Header>Lugares guardados</Card.Header>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    <h1> <BsFillPinMapFill style={{ marginRight: '10px' }} />\r\n                      {this.state.places}</h1>\r\n                  </Card.Title>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n              <Card className=\"text-center\" style={{ width: '18rem', height: '11rem' }}>\r\n                <Card.Header>Eventos planeados</Card.Header>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    <h1><BsFillCalendarEventFill style={{ marginRight: '10px' }} /> {this.state.events}</h1>\r\n                  </Card.Title>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n              <Card className=\"text-center\" style={{ width: '18rem', height: '11rem' }}>\r\n                <Card.Header>Objetos en listas de compras</Card.Header>\r\n                <Card.Body>\r\n                  <Card.Title>\r\n                    <h1><BsFillBasket3Fill style={{ marginRight: '10px' }} /> {this.state.objects}</h1>\r\n                  </Card.Title>\r\n                </Card.Body>\r\n              </Card>\r\n            </Col>\r\n          </Row>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}","import React from \"react\";\r\nimport { GoogleMap, LoadScript, Autocomplete, Marker } from '@react-google-maps/api';\r\nimport axios from 'axios';\r\nimport { Accordion, Card, ListGroup } from 'react-bootstrap';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { CirclePicker } from 'react-color';\r\nimport Button from 'react-bootstrap/Button';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Popover from 'react-bootstrap/Popover';\r\nimport { FaQuestionCircle, FaTrashAlt, FaMapMarkerAlt, FaRegClock, FaExternalLinkAlt } from \"react-icons/fa\";\r\nimport { BiTargetLock } from \"react-icons/bi\";\r\n\r\nconst GOOGLE_API_KEY = \"AIzaSyDSymRKtpFQbaTLW8RovSLfZpjaD0WQow4\";\r\n\r\nconst containerStyle = {\r\n  width: '100%',\r\n  height: '85vh'\r\n};\r\n\r\nconst libraries = ['places'];\r\n\r\nconst image = {\r\n  url: \"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|f47373\",\r\n};\r\n\r\nconst myColorList = ['#E91E63', '#673AB7', '#FFEB3B', '#9C27B0', '#00BCD4', '#607D88', '#CDDC39', '#8ED1FC',\r\n  '#F78DA7', '#FCB900', '#4CAF50', '#BF360C', '#13567C', '#AEA1FF', '#008B02', '#', '#808900', '#7BDCB5', '#A1887F', '#525252', '#FA28FF', '#FF8A65', '#880E4F'];\r\n\r\n\r\nconst popover = (title, msg) => (\r\n  <OverlayTrigger\r\n    placement=\"right\"\r\n    overlay={<Popover id=\"popover-basic\">\r\n      <Popover.Header as=\"h3\">{title}</Popover.Header>\r\n      <Popover.Body>\r\n        {msg}\r\n      </Popover.Body>\r\n    </Popover>}\r\n  >\r\n    <button type=\"button\" style={{ backgroundColor: 'white', borderStyle: 'none', paddingTop: '5px' }}><FaQuestionCircle color=\"grey\" size=\"1.5em\" />\r\n    </button>\r\n\r\n  </OverlayTrigger>\r\n\r\n);\r\n\r\nexport default class GMapReact extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      myPlaces: [],\r\n      activeKey: \"0\",\r\n      value: '0'\r\n    };\r\n\r\n    this.autocomplete = null\r\n\r\n    this.onLoad = this.onLoad.bind(this)\r\n    this.onPlaceChanged = this.onPlaceChanged.bind(this)\r\n    this.handleChangeComplete = this.handleChangeComplete.bind(this)\r\n    this.handleMarkerClick = this.handleMarkerClick.bind(this)\r\n    this.deletePlace = this.deletePlace.bind(this)\r\n    this.sortPlaces = this.sortPlaces.bind(this)\r\n    this.dynamicSort = this.dynamicSort.bind(this)\r\n    this.resetColors = this.resetColors.bind(this)\r\n    this.centerMarker = this.centerMarker.bind(this)\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props.tripId);\r\n    axios.get('http://localhost:5000/places/' + this.props.tripId, //proxy uri\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }).then(res => {\r\n        const places = res.data;\r\n        this.setState({ myPlaces: places });\r\n        const ev = { target: { value: '2' } };\r\n        this.sortPlaces(ev);\r\n      });\r\n  }\r\n\r\n  onLoad(autocomplete) {\r\n    //console.log('autocomplete: ', autocomplete)\r\n    //console.log(this.props.tripId);\r\n    this.autocomplete = autocomplete\r\n  }\r\n\r\n  onPlaceChanged() {\r\n    if (this.autocomplete !== null) {\r\n      //console.log(this.autocomplete.getPlace());\r\n      var placeId = this.autocomplete.getPlace().place_id;\r\n      if (this.state.myPlaces.some(e => e.id === placeId)) {\r\n        //console.log(\"place exists\");\r\n      } else {\r\n        var lat = this.autocomplete.getPlace().geometry.location.lat();\r\n        var lng = this.autocomplete.getPlace().geometry.location.lng();\r\n        var name = this.autocomplete.getPlace().name;\r\n        var myPlaces = this.state.myPlaces;\r\n        var place = { id: this.autocomplete.getPlace().place_id, location: { lat: lat, lng: lng }, name: name, detail: this.autocomplete.getPlace(), tripId: this.props.tripId };\r\n        //console.log(place);\r\n        myPlaces.unshift(place);\r\n        this.setState({ myPlaces: myPlaces });\r\n\r\n        axios.post('http://localhost:5000/places', place)\r\n          .then(res => {\r\n            console.log(\"saved\");\r\n          });\r\n      }\r\n    } else {\r\n      console.log('Autocomplete is not loaded yet!')\r\n    }\r\n  }\r\n\r\n  handleMarkerClick = (event, id) => {\r\n    var data = [...this.state.myPlaces];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    var place = data[index];\r\n    data.splice(index, 1);\r\n    data.unshift(place);\r\n    this.setState({ myPlaces: data });\r\n    //document.getElementById(id).getElementsByTagName(\"button\")[0].click()\r\n  };\r\n\r\n  deletePlace = (event, id) => {\r\n    var data = [...this.state.myPlaces];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    data.splice(index, 1);\r\n    this.setState({ myPlaces: data });\r\n\r\n    axios.delete('http://localhost:5000/places/' +  this.props.tripId + '/' + id)\r\n      .then(res => {\r\n        console.log(\"deleted place\");\r\n      });\r\n  }\r\n\r\n  sortPlaces = (event) => {\r\n    var criteria = event.target.value; \r\n    var data = [];\r\n    if (criteria === '1') {\r\n      data = [...this.state.myPlaces];\r\n      data.sort(this.dynamicSort(\"colorCode\"));\r\n      this.setState({ myPlaces: data });\r\n    } else if (criteria === '2') {\r\n      data = [...this.state.myPlaces];\r\n      data.sort(this.dynamicSort(\"name\"));\r\n      this.setState({ myPlaces: data });\r\n    }\r\n    this.setState({ value: criteria });\r\n  }\r\n\r\n  dynamicSort(property) {\r\n    var sortOrder = 1;\r\n    if (property[0] === \"-\") {\r\n      sortOrder = -1;\r\n      property = property.substr(1);\r\n    }\r\n    return function (a, b) {\r\n      /* next line works with strings and numbers, \r\n       * and you may want to customize it to your needs\r\n       */\r\n      var aval = a[property];\r\n      var bval = b[property];\r\n      if (aval === undefined) {\r\n        aval = 'zzzzzz';\r\n      } if (bval === undefined) {\r\n        bval = 'zzzzzz';\r\n      }\r\n      var result = (aval < bval) ? -1 : (aval > bval) ? 1 : 0;\r\n\r\n      return result * sortOrder;\r\n    }\r\n  }\r\n\r\n  resetColors() {\r\n    var data = [...this.state.myPlaces];\r\n    data.forEach(function (arrayItem) {\r\n      delete arrayItem.colorCode;\r\n      delete arrayItem.color;\r\n    });\r\n    this.setState({ myPlaces: data });\r\n    axios.put('http://localhost:5000/places/' + this.props.tripId + '/colors')\r\n      .then(res => {\r\n        console.log(\"updated colors\");\r\n      });\r\n  }\r\n\r\n  handleChangeComplete = (color, id) => {\r\n    var col = color.hex.replace('#', '');\r\n    var newImage = {\r\n      url: \"http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|\" + col,\r\n    };\r\n    var data = [...this.state.myPlaces];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    data[index].color = newImage;\r\n    data[index].colorCode = color.hex;\r\n    var place = data[index];\r\n    delete place._id;\r\n    this.setState({ myPlaces: data });\r\n\r\n    axios.put('http://localhost:5000/places/' + this.props.tripId + '/' + id, place)\r\n      .then(res => {\r\n        console.log(\"updated color\");\r\n      });\r\n\r\n  };\r\n\r\n  centerMarker = (event, location) => {\r\n    if (typeof this.props.onChange === 'function') {\r\n      this.props.onChange(location);\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    const { center, zoom } = this.props;\r\n    return (\r\n\r\n\r\n      <div style={{ height: '80vh', width: '100%' }}>\r\n\r\n        <Row >\r\n          <Col xl={8} >\r\n            <LoadScript\r\n              googleMapsApiKey={GOOGLE_API_KEY}\r\n              id=\"script-loader\"\r\n              libraries={libraries}\r\n              language=\"es\"\r\n            >\r\n              <GoogleMap\r\n                mapContainerStyle={containerStyle}\r\n                id=\"googleMapS\"\r\n                center={center}\r\n                zoom={zoom}\r\n              >\r\n                <Autocomplete\r\n                  onLoad={this.onLoad}\r\n                  onPlaceChanged={this.onPlaceChanged}\r\n                  restrictions={{ country: this.props.country }}\r\n                >\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Buscar un lugar para agregar\"\r\n                    onFocus={e => e.target.value = ''}\r\n                    style={{\r\n                      boxSizing: `border-box`,\r\n                      border: `1px solid transparent`,\r\n                      width: `50%`,\r\n                      height: `32px`,\r\n                      padding: `0 12px`,\r\n                      borderRadius: `3px`,\r\n                      boxShadow: `0 2px 6px rgba(0, 0, 0, 0.3)`,\r\n                      fontSize: `14px`,\r\n                      outline: `none`,\r\n                      textOverflow: `ellipses`,\r\n                      position: \"absolute\",\r\n                      left: \"50%\",\r\n                      marginLeft: \"-120px\"\r\n                    }}\r\n                  />\r\n                </Autocomplete>\r\n                {this.state.myPlaces.map((place, index) =>\r\n                  <Marker\r\n                    position={place.location}\r\n                    //label={{ text: place.name, fontFamily: 'roboto', fontWeight: 'bold', color: '#14213D' }}\r\n                    key={place.name}\r\n                    icon={place.color === undefined ? image : place.color}\r\n                    onClick={e => this.handleMarkerClick(e, place.id)}\r\n                  />\r\n                )}\r\n              </GoogleMap>\r\n            </LoadScript>\r\n          </Col>\r\n          <Col xl={4}>\r\n            <Row style={{ marginBottom: '10px' }} className=\"map-right-div\">\r\n              <Col xs={6} lg={7}>\r\n                <div style={{ margin: 'auto' }}>\r\n                  <div id=\"first\">{popover(\"Mapa de lugares\", \"Busca un lugar y seleccionalo para agregarlo a la lista. Puedes ver la información del lugar, y asignarle un color. Agrupa los lugares que quieres visitar en el mismo día en un mismo color. Esto te servirá para planear el itinerario.\")}</div>\r\n                  <div id=\"second\">\r\n                    <select className=\"form-select\" aria-label=\"Default select example\"\r\n                      value={this.state.value}\r\n                      onChange={e => this.sortPlaces(e)}\r\n                      style={{ display: 'inline-block' }}>\r\n                      <option value=\"1\">Ordenar por color</option>\r\n                      <option value=\"2\">Ordenar por nombre</option>\r\n                    </select></div>\r\n                  <div id=\"clear\"></div>\r\n                </div>\r\n              </Col>\r\n              <Col xs={6} lg={5}>\r\n                <button type=\"button\" className=\"btn btn-danger float-right\"  onClick={this.resetColors}>Reiniciar colores</button>\r\n              </Col>\r\n            </Row >\r\n            <div>\r\n              <Accordion defaultActiveKey={this.state.activeKey} style={{ maxHeight: '80vh', overflowY: 'scroll' }}>\r\n                {this.state.myPlaces.map((place, index) =>\r\n                  <Accordion.Item eventKey={index.toString()} key={index} id={place.id}>\r\n                    <Accordion.Header>\r\n                      <img width=\"30\" src={place.detail.icon} height=\"30\" className=\"d-inline-block align-top\" alt=\"\"></img>\r\n                      <span className=\"accordion-pad\"\r\n                        style={{\r\n                          textDecorationLine: place.colorCode === undefined ? 'none' : 'underline',\r\n                          textDecorationColor: place.colorCode === undefined ? '' : place.colorCode,\r\n                          textDecorationThickness: place.colorCode === undefined ? '' : '3px'\r\n                        }}>\r\n                        {place.name}\r\n                      </span>\r\n\r\n                    </Accordion.Header>\r\n                    <Accordion.Body>\r\n                      <Card>\r\n                        <Card.Header style={{ backgroundColor: place.colorCode === undefined ? '' : place.colorCode, color: 'black' }}>\r\n                          <Button variant=\"info\" className=\"float-left\" onClick={e => this.centerMarker(e, place.location)}>\r\n                            <BiTargetLock /> Ver en el mapa\r\n                          </Button>\r\n                          <Button variant=\"danger\" className=\"float-right\" onClick={e => this.deletePlace(e, place.id)}>\r\n                            <FaTrashAlt />\r\n                          </Button>\r\n                        </Card.Header>\r\n                        <ListGroup>\r\n                          <ListGroup.Item>\r\n                            <FaMapMarkerAlt className=\"pad-icon\" />\r\n                            {place.detail.formatted_address}\r\n                          </ListGroup.Item>\r\n                          <ListGroup.Item>\r\n                            <div className=\"btn-group\" style={{ width: '100%' }}>\r\n                              <button type=\"button\" className=\"btn btn-outline-info col-12 dropdown-toggle\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"\r\n                              >\r\n                                <FaRegClock className=\"pad-icon\" />\r\n                                Horas de apertura\r\n                              </button>\r\n                              <div className=\"dropdown-menu\">\r\n                                {place.detail.opening_hours !== undefined ? place.detail.opening_hours.weekday_text.map((text) =>\r\n                                  <span className=\"dropdown-item\" href=\"#\" key={text}>{text}</span>\r\n                                ) : '-'}\r\n                              </div>\r\n                            </div>\r\n                          </ListGroup.Item>\r\n                          <ListGroup.Item>\r\n                            <FaExternalLinkAlt className=\"pad-icon\" />\r\n                            <a href={place.detail.website} target=\"_blank\" rel=\"noreferrer\">Visitar URL</a>\r\n                          </ListGroup.Item>\r\n                        </ListGroup>\r\n                        <Card.Footer>\r\n                          <div className=\"circlecontainer\">\r\n                            <div className=\"child\">\r\n                              <CirclePicker onChange={e => this.handleChangeComplete(e, place.id)} color={place.colorCode} colors={myColorList.slice(0, this.props.numOfDays)} />\r\n                            </div>\r\n                          </div>\r\n                        </Card.Footer>\r\n                      </Card>\r\n                    </Accordion.Body>\r\n                  </Accordion.Item>\r\n\r\n                )}\r\n              </Accordion>\r\n              {this.state.myPlaces.length === 0 ? 'Empieza buscando lugares que quieras visitar en este viaje' : ''}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Banner from \"../Banner\";\r\nimport GMapReact from './GMapReact';\r\nimport moment from 'moment';\r\nimport configureStore from '../../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nexport default class Mapa extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      center: {\r\n        lat: 37.7824134,\r\n        lng: -122.4088472\r\n      },\r\n      zoom: 13,\r\n      tripId: store.getState().trip.selectedTrip.id,\r\n      numOfDays: 3,\r\n      country: '',\r\n    };\r\n\r\n    this.recenterMap = this.recenterMap.bind(this)\r\n  }\r\n  componentDidMount() {\r\n    const trip = store.getState().trip.selectedTrip;\r\n\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n      this.setState({\r\n        center: {\r\n          lat: parseFloat(trip.selectedCity.split(\",\")[1]),\r\n          lng: parseFloat(trip.selectedCity.split(\",\")[2])\r\n        }\r\n      });\r\n      this.setState({ tripId: trip.id });\r\n      var a = moment(trip.calendar.startDate);\r\n      var b = moment(trip.calendar.endDate);\r\n      var numDays = b.diff(a, 'days') + 1;\r\n      this.setState({ numOfDays: numDays });\r\n      this.setState({ country: trip.selectedCountry.toUpperCase() });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n\r\n  }\r\n\r\n  recenterMap(value) {\r\n    if (this.state.center !== value) {\r\n      console.log(\"dif\");\r\n      this.setState({ center: value });\r\n      this.setState({ zoom: 16 });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const center = this.state.center;\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Mapa</li>\r\n          </ol>\r\n        </div>\r\n        <div>\r\n          <GMapReact center={center} zoom={this.state.zoom} tripId={this.state.tripId} numOfDays={this.state.numOfDays} onChange={this.recenterMap} country={this.state.country} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport moment from 'moment';\r\n\r\nclass CustomModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: true,\r\n            startDate: undefined,\r\n            endDate: undefined,\r\n            duration: '-',\r\n            invalidData: true,\r\n            errors: {},\r\n            includeTime: false,\r\n            startHour: this.props.minimumHour,\r\n            endHour: this.props.minimumHour,\r\n            lastHour: this.props.minimumHour,\r\n        };\r\n        //console.log(props.placeToSchedule);\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        nextState.invalidData = !(nextState.startDate && nextState.endDate);\r\n    };\r\n\r\n    hideModal = () => {\r\n        const fullname = this.fullname.value;\r\n        const phone = this.phone.value;\r\n        this.props.onSave({\r\n            fullname,\r\n            phone,\r\n        });\r\n    }\r\n\r\n    handleRemove = () => {\r\n        this.props.onRemove();\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        // You don't have to do this check first, but it can help prevent an unneeded render\r\n        if (nextProps.minimumHour !== this.state.lastHour) {\r\n            var startDate = moment(nextProps.start.format('yyyy-MM-DD') + ' ' + nextProps.minimumHour);\r\n            this.setState({ startDate: startDate });\r\n            var endDate = moment(nextProps.start.format('yyyy-MM-DD') + ' ' + nextProps.minimumHour).add(1, 'hours');\r\n            this.setState({ endDate: endDate });\r\n\r\n            this.setState({ lastHour: nextProps.minimumHour });\r\n            this.setState({ startHour: nextProps.minimumHour });\r\n            this.setState({ endHour: endDate.format('HH:mm') });\r\n            this.setState({ duration: '1 hora' });\r\n        }\r\n    }\r\n\r\n    handleValidation() {\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        //console.log(this.state.endDate <= this.state.startDate);\r\n        //Name\r\n        if (this.state.endDate <= this.state.startDate) {\r\n            formIsValid = false;\r\n            errors[\"endDate\"] = \"La fecha de fin debe ser mayor que la fecha de inicio\";\r\n        }\r\n\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    hexToRgb(hex) {\r\n        var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n        return result ? {\r\n            r: parseInt(result[1], 16),\r\n            g: parseInt(result[2], 16),\r\n            b: parseInt(result[3], 16)\r\n        } : null;\r\n    }\r\n\r\n    handleSave = () => {\r\n\r\n        if (this.handleValidation()) {\r\n            const fullname = this.fullname.value;\r\n            var phone = this.phone.value;\r\n            var start = this.state.startDate;\r\n            const end = this.state.endDate;\r\n            const fromSchedule = true;\r\n            var isMovement = false;\r\n            var intervals = [];\r\n            const color = this.hexToRgb(this.props.placeToSchedule.colorCode);\r\n            const placeId = this.props.placeToSchedule.id;\r\n            //console.log(color);\r\n\r\n            intervals.push({\r\n                fromSchedule,\r\n                start,\r\n                end,\r\n                fullname,\r\n                phone,\r\n                isMovement,\r\n                color,\r\n                placeId,\r\n            });\r\n\r\n            if (this.state.includeTime) {\r\n                var minutes = parseInt(this.props.placeToSchedule.duration.split(\" \")[0]);\r\n                var initOfMove = start.clone().subtract(minutes, \"minutes\");\r\n                isMovement = true;\r\n                var movement = {\r\n                    fromSchedule,\r\n                    start: initOfMove,\r\n                    end: start,\r\n                    isMovement,\r\n                };\r\n                intervals.push(movement);\r\n            }\r\n\r\n            this.props.onSave(intervals);\r\n\r\n\r\n        } else {\r\n            alert(\"Form has errors.\");\r\n        }\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.onModalClose();\r\n    }\r\n\r\n    handleStartDateChange = (event) => {\r\n        this.setState({ startHour: event.target.value });\r\n        var startDate = moment(this.props.start.format('yyyy-MM-DD') + ' ' + event.target.value);\r\n        this.setState({ startDate: startDate });\r\n\r\n        if (this.state.endDate !== undefined) {\r\n            var minutes = this.state.endDate.diff(startDate, 'minutes');\r\n            var quotient = minutes / 60.0;\r\n            this.setState({ duration: moment(quotient) + ' hora(s)' });\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (event) => {\r\n        this.setState({ endHour: event.target.value });\r\n        var endDate = moment(this.props.start.format('yyyy-MM-DD') + ' ' + event.target.value);\r\n        this.setState({ endDate: endDate });\r\n\r\n        if (this.state.startDate !== undefined) {\r\n            var minutes = endDate.diff(this.state.startDate, 'minutes');\r\n            var quotient = minutes / 60.0;\r\n            this.setState({ duration: moment(quotient) + ' hora(s)' });\r\n        }\r\n    }\r\n\r\n    handleCheckbox = (event) => {\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        this.setState({\r\n            includeTime: value\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            phone,\r\n            start,\r\n        } = this.props;\r\n\r\n        const dow = this.props.start !== undefined ? this.props.start.day() === 0 ? 6 : this.props.start.day()-1 : '1';\r\n        const opHour = this.props.placeToSchedule !== undefined ? this.props.placeToSchedule.opHours.weekday_text[parseInt(dow)] : '-';\r\n\r\n        return (\r\n            <Modal style={{ minWidth: '500px' }} show={this.props.show}>\r\n                <Modal.Header>\r\n                    <Modal.Title>Planear visita</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-4 col-form-label\">Hora de apertura\r\n                        </label>\r\n                        <div className=\"col-sm-8\">\r\n                            <input type=\"text\" readOnly className=\"form-control\" value={opHour} disabled />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Fecha</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"text\" readOnly className=\"form-control\" value={start.format('DD/MM/yyyy')} disabled />\r\n                        </div>\r\n                        <label className=\"col-sm-2 col-form-label\">Inicio</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"time\" className=\"appt\" name=\"appt\" required\r\n                                onChange={e => this.handleStartDateChange(e)} value={this.state.startHour} />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"startDate\"]}</span>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Fin</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"time\" className=\"appt\" name=\"appt\" required\r\n                                onChange={e => this.handleEndDateChange(e)} value={this.state.endHour} />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"endDate\"]}</span>\r\n                        </div>\r\n                        <label className=\"col-sm-2 col-form-label\">Duración</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"text\" readOnly className=\"form-control\" value={this.state.duration} disabled />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Lugar</label>\r\n                        <div className=\"col-sm-10\">\r\n                            <input type=\"text\" readOnly ref={el => this.fullname = el}\r\n                                className=\"form-control\" value={this.props.placeToSchedule !== undefined ? this.props.placeToSchedule.name : ''} disabled />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Detalle</label>\r\n                        <div className=\"col-sm-10\">\r\n                            <input\r\n                                ref={el => this.phone = el}\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                placeholder=\"Ingrese información adicional para la visita\"\r\n                                defaultValue={phone}\r\n                                id=\"usr2\"\r\n                            />\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <div className=\"form-check center\">\r\n                            <input className=\"form-check-input\" type=\"checkbox\" checked={this.state.includeTime} onChange={this.handleCheckbox} />\r\n                            <label className=\"form-check-label\">\r\n                                Incluir trayecto desde {this.props.parentOfPlace !== undefined ? this.props.parentOfPlace.name : ''} ({this.props.placeToSchedule !== undefined ? this.props.placeToSchedule.duration : ' '})\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                        Close\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={this.handleSave} disabled={this.state.invalidData}>Guardar</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default CustomModal;","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport moment from 'moment';\r\n\r\nclass CustomModalForCalendar extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        var minutes = this.props.end.diff(this.props.start, 'minutes');\r\n        var quotient = (minutes / 60.0).toFixed(1);\r\n        this.state = {\r\n            startDate: this.props.start,\r\n            endDate: this.props.end,\r\n            startHour: this.props.start.format(\"HH:mm\"),\r\n            endHour: this.props.end.format(\"HH:mm\"),\r\n            duration: quotient + ' hora(s)',\r\n            errors: {},\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        //console.log(this.state.endDate <= this.state.startDate);\r\n        //Name\r\n        if (this.state.endDate <= this.state.startDate) {\r\n            formIsValid = false;\r\n            errors[\"endDate\"] = \"La fecha de fin debe ser mayor que la fecha de inicio\";\r\n        }\r\n\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleRemove = () => {\r\n        this.props.onRemove();\r\n    }\r\n\r\n    hideModal = () => {\r\n        const fullname = this.fullname.value;\r\n        const phone = this.phone.value;\r\n        this.props.onSave({\r\n            fullname,\r\n            phone,\r\n        });\r\n    }\r\n\r\n    handleRemove = () => {\r\n        this.props.onRemove();\r\n    }\r\n\r\n    handleSave = () => {\r\n        if (this.handleValidation()) {\r\n            const fullname = this.fullname.value;\r\n            const phone = this.phone.value;\r\n            var start = this.state.startDate;\r\n            const end = this.state.endDate;\r\n            if (this.props.uid !== undefined) {\r\n                this.props.onSave({\r\n                    fullname,\r\n                    phone,\r\n                    uid: this.props.uid,\r\n                    start,\r\n                    end,\r\n                });\r\n            } else {\r\n                this.props.onSave({\r\n                    fullname,\r\n                    phone,\r\n                    start,\r\n                    end,\r\n                });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    handleStartDateChange = (event) => {\r\n        this.setState({ startHour: event.target.value });\r\n        var startDate = moment(this.props.start.format('yyyy-MM-DD') + ' ' + event.target.value);\r\n        this.setState({ startDate: startDate });\r\n\r\n        if (this.state.endDate !== undefined) {\r\n            var minutes = this.state.endDate.diff(startDate, 'minutes');\r\n            var quotient = (minutes / 60.0).toFixed(1);\r\n            this.setState({ duration: quotient + ' hora(s)' });\r\n        }\r\n    }\r\n\r\n    handleEndDateChange = (event) => {\r\n        this.setState({ endHour: event.target.value });\r\n        var endDate = moment(this.props.start.format('yyyy-MM-DD') + ' ' + event.target.value);\r\n        this.setState({ endDate: endDate });\r\n\r\n        if (this.state.startDate !== undefined) {\r\n            var minutes = endDate.diff(this.state.startDate, 'minutes');\r\n            var quotient = (minutes / 60.0).toFixed(1);\r\n            this.setState({ duration: quotient + ' hora(s)' });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            fullname,\r\n            phone,\r\n            start,\r\n            end,\r\n            actionType\r\n        } = this.props;\r\n\r\n        const action = actionType === \"create\" ? \"Agendar\" : \"Actualizar\"\r\n\r\n        return (\r\n            <Modal.Dialog style={{ minWidth: '500px' }}>\r\n                <Modal.Header>\r\n                    <Modal.Title>Planear visita</Modal.Title>\r\n                </Modal.Header>\r\n\r\n                <Modal.Body>\r\n\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Fecha</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"text\" readOnly className=\"form-control\" value={start.format('DD/MM/yyyy')} disabled />\r\n                        </div>\r\n                        <label className=\"col-sm-2 col-form-label\">Inicio</label>\r\n                        <div className=\"col-sm-4\">\r\n                            {actionType === \"create\" ? <input type=\"text\" readOnly className=\"form-control\" value={start.format('hh:mm a')} disabled /> :\r\n                                <><input type=\"time\" className=\"appt\" name=\"appt\" required\r\n                                    onChange={e => this.handleStartDateChange(e)} value={this.state.startHour} /><span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"startDate\"]}</span></>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Fin</label>\r\n                        <div className=\"col-sm-4\">\r\n                            {actionType === \"create\" ? <input type=\"text\" readOnly className=\"form-control\" value={end.format('hh:mm a')} disabled /> :\r\n                                <> <input type=\"time\" className=\"appt\" name=\"appt\" required\r\n                                    onChange={e => this.handleEndDateChange(e)} value={this.state.endHour} />\r\n                                    <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"endDate\"]}</span></>\r\n                            }\r\n                        </div>\r\n                        <label className=\"col-sm-2 col-form-label\">Duración</label>\r\n                        <div className=\"col-sm-4\">\r\n                            <input type=\"text\" readOnly className=\"form-control\" value={this.state.duration} disabled />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Lugar</label>\r\n                        <div className=\"col-sm-10\">\r\n                            <input\r\n                                ref={el => this.fullname = el}\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                placeholder=\"Full name\"\r\n                                defaultValue={fullname}\r\n                                id=\"usr\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-form-label\">Detalle</label>\r\n                        <div className=\"col-sm-10\">\r\n                            <input\r\n                                ref={el => this.phone = el}\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                placeholder=\"Ingrese información adicional para la visita\"\r\n                                defaultValue={phone}\r\n                                id=\"usr2\"\r\n                            />\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Button variant=\"danger\" onClick={this.handleRemove}>Borrar</Button>\r\n                    <Button variant=\"primary\" onClick={this.handleSave}>{action}</Button>\r\n                </Modal.Footer>\r\n            </Modal.Dialog>\r\n\r\n\r\n        );\r\n    }\r\n}\r\n\r\nexport default CustomModalForCalendar;","export default __webpack_public_path__ + \"static/media/subway-solid.5f37c109.svg\";","\r\nimport React from 'react';\r\nimport clock from '../images/subway-solid.svg'\r\n\r\nconst customEvent = (props) => {\r\n  const isMovement = props.isMovement;\r\n  const color = props.color;\r\n  if (isMovement !== undefined && isMovement) {\r\n    return (<div className=\"evento center\" style={{ backgroundColor: \"rgb(57,111,158,.6)\" }}>\r\n      <img width=\"20\" src={clock} height=\"20\" alt=\"\" className=\"pad-icon\"></img>\r\n      <span>{`${props.start.format('HH:mm')} - ${props.end.format('HH:mm')}`}</span>\r\n    </div>);\r\n  }\r\n  else if (color !== undefined) {\r\n    const colorString = color.r + ',' + color.g + ',' + color.b + ',.4 ';\r\n    return (<div className=\"evento\" style={{ backgroundColor: \"rgb(\" + colorString + \")\" }} >\r\n      <span>{`${props.start.format('HH:mm')} - ${props.end.format('HH:mm')}`}</span>\r\n      <br />\r\n      {props.value}\r\n    </div>);\r\n  } else {\r\n    return (<div className=\"evento\" style={{ backgroundColor: \"rgb(139,195,74,.4)\" }} >\r\n      <span>{`${props.start.format('HH:mm')} - ${props.end.format('HH:mm')}`}</span>\r\n      <br />\r\n      {props.value}\r\n    </div>);\r\n  }\r\n\r\n};\r\n\r\nexport default customEvent;","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Form from 'react-bootstrap/Form';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport { FaQuestionCircle } from \"react-icons/fa\";\r\n\r\nconst popover = (msg) => (\r\n    <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 200 }}\r\n        overlay={<Tooltip>{msg}</Tooltip>}\r\n    >\r\n        <button type=\"button\" style={{ backgroundColor: 'white', borderStyle: 'none' }}><FaQuestionCircle color=\"grey\" size=\"1.3em\" />\r\n        </button>\r\n\r\n    </OverlayTrigger>\r\n);\r\n\r\nclass CalendarModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            errors: {},\r\n            startHour: this.props.minimumHour,\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let errors = {};\r\n        let formIsValid = true;\r\n        if (this.unit.value === '') {\r\n            formIsValid = false;\r\n            errors[\"unit\"] = \"Ingrese una unidad para el calendario\";\r\n        } else if (parseInt(this.unit.value) < 1 || parseInt(this.unit.value) > 60) {\r\n            formIsValid = false;\r\n            errors[\"unit\"] = \"Ingrese una unidad entre 1 y 120\";\r\n        }\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleSave = () => {\r\n        if (this.handleValidation()) {\r\n            this.props.onSave({unit: this.unit.value, calendarStart: this.state.startHour});\r\n        }\r\n    }\r\n\r\n\r\n    handleClose = () => {\r\n        this.props.onModalClose();\r\n    }\r\n\r\n    handleStartDateChange = (event) => {\r\n        this.setState({ startHour: event.target.value });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.show} onHide={this.handleClose}\r\n                backdrop=\"static\"\r\n                keyboard={false}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Configuraciones del calendario</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>\r\n                                {popover(\"Cantidad de minutos que representan un cuadro en el calendario.\")}\r\n                                Unidad del calendario\r\n                            </Form.Label>\r\n                            <Form.Control type=\"number\" placeholder=\"Ingrese un valor de 1 a 60\" ref={el => this.unit = el} defaultValue={this.props.unit} />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"unit\"]}</span>\r\n                        </Form.Group>\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>\r\n                                {popover(\"El calendario se mostrará desde esta hora.\")}\r\n                                Hora de inicio del calendario\r\n                            </Form.Label>\r\n                            <input type=\"time\" className=\"appt\" name=\"appt\" onChange={e => this.handleStartDateChange(e)} value={this.state.startHour} />\r\n                        </Form.Group>\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                        Cerrar\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={this.handleSave}>\r\n                        Guardar\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default CalendarModal;","import React from 'react';\r\nimport WeekCalendar from 'react-week-calendar';\r\nimport 'react-week-calendar/dist/style.css';\r\nimport axios from 'axios';\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport CustomModal from '../modals/CustomModal';\r\nimport CustomModalForCalendar from '../modals/CustomModalForCalendar';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Form from 'react-bootstrap/Form';\r\nimport { TwitterPicker } from 'react-color';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport CustomEvent from './CustomEvent';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport { FaQuestionCircle } from \"react-icons/fa\";\r\nimport { BsFillGearFill } from \"react-icons/bs\";\r\nimport CalendarModal from '../modals/CalendarModal';\r\n\r\nconst GOOGLE_API_KEY = \"AIzaSyDSymRKtpFQbaTLW8RovSLfZpjaD0WQow4\";\r\n\r\nconst popover = (msg) => (\r\n    <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 200 }}\r\n        overlay={<Tooltip>{msg}</Tooltip>}\r\n    >\r\n        <button type=\"button\" style={{ backgroundColor: 'white', borderStyle: 'none' }}><FaQuestionCircle color=\"grey\" size=\"1.3em\" />\r\n        </button>\r\n\r\n    </OverlayTrigger>\r\n);\r\n\r\nexport default class Calendario extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            lastUid: 1,\r\n            selectedIntervals: [\r\n                /* {\r\n                    uid: 1,\r\n                    start: moment('2021-12-25 09:12'),\r\n                    end: moment('2021-12-25 12:15'),\r\n                    value: \"Booked by Smith\",\r\n                    isMovement: false,\r\n                }, {\r\n                    uid: 2,\r\n                    start: moment('2021-12-25 9:12'),\r\n                    end: moment('2021-12-25 12:10'),\r\n                    value: \"Booked by Bohr\",\r\n                    isMovement: false,\r\n                }, */\r\n            ],\r\n            myPlaces: [],\r\n            colors: [],\r\n            value: '0',\r\n            background: '#000000',\r\n            colorPlaces: [],\r\n            hotel: '',\r\n            transportMode: 'transit',\r\n            path: [],\r\n            listOfDates: [],\r\n            colorDate: '',\r\n            colorMoment: moment(),\r\n            origin: {},\r\n            showModal: false,\r\n            pathSchedule: [],\r\n            minimumHour: '06:00',\r\n            addedDelta: false,\r\n            showCalendarModal: false,\r\n            minimumCalendarHour: '06:00',\r\n            unit: 30,\r\n            calendarStart: { h: 6, m: 0 }\r\n        };\r\n\r\n        this.handleEventRemove = this.handleEventRemove.bind(this);\r\n        this.handleEventUpdate = this.handleEventUpdate.bind(this);\r\n        this.handleSelect = this.handleSelect.bind(this);\r\n        this.handleChangeComplete = this.handleChangeComplete.bind(this);\r\n        this.placeSelected = this.placeSelected.bind(this);\r\n        this.dynamicSort = this.dynamicSort.bind(this);\r\n        this.handleHotelSelection = this.handleHotelSelection.bind(this);\r\n        this.handleModeChange = this.handleModeChange.bind(this);\r\n        this.computeDistances = this.computeDistances.bind(this);\r\n        this.handleDateChange = this.handleDateChange.bind(this);\r\n        this.handleDeleteFromPath = this.handleDeleteFromPath.bind(this);\r\n        this.scheduleVisit = this.scheduleVisit.bind(this);\r\n        this.onModalClose = this.onModalClose.bind(this);\r\n        this.patchTripCalendar = this.patchTripCalendar.bind(this);\r\n\r\n    }\r\n\r\n    patchTripCalendar(changes) {\r\n        axios.put('http://localhost:5000/hotels/' + this.props.tripId, changes)\r\n            .then(res => {\r\n                console.log(\"updated calendar\");\r\n            });\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://localhost:5000/places/' + this.props.tripId, //proxy uri\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(res => {\r\n                const places = res.data;\r\n                places.sort(this.dynamicSort(\"name\"));\r\n                this.setState({ myPlaces: places });\r\n                const uniqueColors = [...new Set(places.map(item => item.colorCode))];\r\n                var newArray = uniqueColors.map(x => x !== undefined ? x : \"#000000\");\r\n                this.setState({ colors: newArray });\r\n\r\n                var days = [];\r\n                var day = this.props.firstDay;\r\n                this.setState({ colorMoment: day });\r\n                this.setState({ colorDate: day.format('dddd - DD/MM/YYYY') });\r\n                var endOfWeek = day.clone().add(this.props.numOfDays - 1, 'd');\r\n\r\n                while (day <= endOfWeek) {\r\n                    days.push(day.format('dddd - DD/MM/YYYY'));\r\n                    day = day.clone().add(1, 'd');\r\n                }\r\n\r\n                this.setState({ listOfDates: days });\r\n            });\r\n\r\n        axios.get('http://localhost:5000/events/' + this.props.tripId, //proxy uri\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(res => {\r\n                const sevents = res.data;\r\n                var lastuid = 1;\r\n                sevents.forEach(function (obj) {\r\n                    if (obj.uid > lastuid) {\r\n                        lastuid = obj.uid;\r\n                    }\r\n                    obj.start = moment(obj.startString);\r\n                    obj.end = moment(obj.endString);\r\n                });\r\n                this.setState({ selectedIntervals: sevents, lastUid: lastuid + 1 });\r\n            });\r\n\r\n        axios.get('http://localhost:5000/hotels/' + this.props.tripId, //proxy uri\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(res => {\r\n                const hotel = res.data;\r\n                if (hotel.length > 0) {\r\n                    var hotelId = hotel[0].placeId !== undefined ? hotel[0].placeId : '';\r\n                    var unit = hotel[0].unit !== undefined ? hotel[0].unit : this.state.unit;\r\n                    var calendarStart = hotel[0].calendarStart !== undefined ? hotel[0].calendarStart : this.state.calendarStart;\r\n                    var minimumCalendarHour = this.state.minimumCalendarHour;\r\n                    if (hotel[0].calendarStart !== undefined) {\r\n                        var h = hotel[0].calendarStart.h;\r\n                        var m = hotel[0].calendarStart.m;\r\n                        var hh = h > 9 ? \"\" + h : \"0\" + h;\r\n                        var mm = m > 9 ? \"\" + m : \"0\" + m;\r\n                        minimumCalendarHour = hh + ':' + mm;\r\n                    }\r\n                    this.setState({ hotel: hotelId, unit: unit, calendarStart: calendarStart, minimumCalendarHour: minimumCalendarHour });\r\n                } else {\r\n                    var newObj = { id: this.props.tripId, placeId: '', unit: this.state.unit, calendarStart: this.state.calendarStart };\r\n                    axios.post('http://localhost:5000/hotels', newObj)\r\n                        .then(res => {\r\n                        });\r\n                }\r\n            });\r\n\r\n    }\r\n\r\n    handleEventRemove = (event) => {\r\n        const { selectedIntervals } = this.state;\r\n        var index = selectedIntervals.findIndex((interval) => interval.uid === event.uid);\r\n        if (index > -1) {\r\n            selectedIntervals.splice(index, 1);\r\n            this.setState({ selectedIntervals });\r\n        }\r\n\r\n        axios.delete('http://localhost:5000/events/' + this.props.tripId + '/' + event.uid)\r\n            .then(res => {\r\n                console.log(\"deleted event\");\r\n            });\r\n\r\n        //fix path delete\r\n        var data = [...this.state.path];\r\n        index = data.findIndex(obj => obj.id === event.placeId);\r\n        if (index !== -1 && index === data.length - 1) {\r\n            data[index].canSchedule = true;\r\n            data[index].scheduled = false;\r\n            this.setState({ path: data });\r\n\r\n        }\r\n    }\r\n\r\n    handleEventUpdate = (event) => {\r\n        const selectedIntervals = this.state.selectedIntervals;\r\n        const index = selectedIntervals.findIndex((interval) => interval.uid === event.uid);\r\n        if (index > -1) {\r\n            event.value = event.fullname + ' - ' + event.phone\r\n            selectedIntervals[index] = event;\r\n            this.setState({ selectedIntervals: selectedIntervals });\r\n        }\r\n\r\n        delete event._id\r\n        event.startString = event.start.format(\"yyyy-MM-DD HH:mm\");\r\n        event.endString = event.end.format(\"yyyy-MM-DD HH:mm\");\r\n\r\n        axios.put('http://localhost:5000/events/' + this.props.tripId + '/' + event.uid, event)\r\n            .then(res => {\r\n                console.log(\"updated event\");\r\n            });\r\n    }\r\n\r\n    handleSelect = (newIntervals) => {\r\n        //console.log(newIntervals[0].start.format(\"dd/MM/yyyy hh:mm\"));\r\n        console.log(newIntervals);\r\n        const { lastUid, selectedIntervals } = this.state;\r\n        const intervals = newIntervals.map((interval, index) => {\r\n            var val = '';\r\n            if (interval.fullname !== undefined) {\r\n                val += interval.fullname;\r\n            }\r\n            if (interval.phone !== undefined) {\r\n                if (val === '') {\r\n                    val += interval.phone;\r\n                } else {\r\n                    val += ' - ' + interval.phone;\r\n                }\r\n            }\r\n            return {\r\n                ...interval,\r\n                uid: lastUid + index,\r\n                value: val,\r\n                isMovement: interval.isMovement,\r\n                color: interval.color,\r\n                tripId: this.props.tripId,\r\n                startString: interval.start.format(\"yyyy-MM-DD HH:mm\"),\r\n                endString: interval.end.format(\"yyyy-MM-DD HH:mm\"),\r\n\r\n            }\r\n        });\r\n\r\n        //compute minimum hour for this path\r\n        var minima = this.state.minimumHour;\r\n        var placeId = '';\r\n        newIntervals.forEach((interval) => {\r\n            if (interval.placeId !== undefined) {\r\n                placeId = interval.placeId;\r\n            }\r\n            var startInterval = interval.end.format('dddd - DD/MM/YYYY');\r\n            if (startInterval === this.state.colorDate) {\r\n                var horas = interval.end.format('HH:mm').split(\":\");\r\n                var horaMin = minima.split(\":\");\r\n                var hora1 = parseInt(horas[0]);\r\n                var hora2 = parseInt(horaMin[0]);\r\n                var horamin1 = parseInt(horas[1]);\r\n                var horamin2 = parseInt(horaMin[1]);\r\n                if (hora1 > hora2 || (hora1 === hora2 && horamin1 > horamin2)) {\r\n                    var nuevaminima = interval.end.format('HH:mm');\r\n                    minima = nuevaminima;\r\n                }\r\n            }\r\n        })\r\n\r\n        this.setState({ minimumHour: minima });\r\n\r\n        //update path buttons\r\n        if (placeId !== '') {\r\n            var data = [...this.state.path];\r\n            var index = data.findIndex(obj => obj.id === placeId);\r\n            if (index !== -1) {\r\n                data[index].canSchedule = false;\r\n                data[index].scheduled = true;\r\n                this.setState({ addedDelta: false });\r\n                if (index + 1 < data.length) { //there is another element to shedule\r\n                    data[index + 1].canSchedule = true;\r\n                } \r\n            }\r\n        }\r\n\r\n        axios.post('http://localhost:5000/events', intervals)\r\n            .then(res => {\r\n                console.log(\"savedSchedule\");\r\n            });\r\n\r\n        this.setState({\r\n            selectedIntervals: selectedIntervals.concat(intervals),\r\n            lastUid: lastUid + newIntervals.length\r\n        })\r\n\r\n        this.setState({ showModal: false });\r\n    }\r\n\r\n    onModalClose = (event) => {\r\n        this.setState({ showModal: false });\r\n    }\r\n\r\n    onCalendarModalClose = (event) => {\r\n        this.setState({ showCalendarModal: false });\r\n    }\r\n\r\n    openCalendarModal = () => {\r\n        this.setState({ showCalendarModal: true });\r\n    }\r\n\r\n    handleCalendarSave = (configurations) => {\r\n        var calendarStart = { h: parseInt(configurations.calendarStart.split(':')[0]), m: parseInt(configurations.calendarStart.split(':')[1]) };\r\n        this.setState({ showCalendarModal: false, unit: configurations.unit, calendarStart: calendarStart });\r\n        this.patchTripCalendar({ unit: configurations.unit, calendarStart: calendarStart });\r\n    }\r\n\r\n\r\n    handleChangeComplete = (color) => {\r\n        var col = color.hex;\r\n        this.setState({ background: col });\r\n        var data = [...this.state.myPlaces];\r\n        var colorPlaces = [];\r\n        if (col === '#000000') {\r\n            colorPlaces = data.filter(function (el) {\r\n                return el.colorCode === undefined;\r\n            });\r\n        } else {\r\n            colorPlaces = data.filter(function (el) {\r\n                return el.colorCode === col;\r\n            });\r\n        }\r\n\r\n        if (this.state.hotel !== '') {\r\n            var index = colorPlaces.findIndex(obj => obj.id === this.state.hotel);\r\n            var hotelPlace = null;\r\n            if (index !== -1) {\r\n                hotelPlace = colorPlaces[index];\r\n                colorPlaces.splice(index, 1);\r\n            } else {\r\n                index = data.findIndex(obj => obj.id === this.state.hotel);\r\n                hotelPlace = data[index];\r\n            }\r\n            var path = [...this.state.path];\r\n            path = []; //temporal\r\n            if (path.length === 0) {\r\n                hotelPlace.durationValue = 0;\r\n                path.push(hotelPlace)\r\n                this.setState({ path: path });\r\n            }\r\n            this.setState({ origin: hotelPlace });\r\n\r\n            if (colorPlaces.length > 0) {\r\n                this.computeDistances(hotelPlace, colorPlaces);\r\n            } else {\r\n                this.setState({ colorPlaces: [] });\r\n            }\r\n        }\r\n    };\r\n\r\n    computeDistances(origin, colorPlaces) {\r\n        var locationSeparator = ',';\r\n        var placesSeparator = '|';\r\n\r\n        var origins = origin.location.lat + locationSeparator + origin.location.lng;\r\n        var dests = [];\r\n        colorPlaces.forEach(function (arrayItem) {\r\n            dests.push(arrayItem.location.lat + locationSeparator + arrayItem.location.lng);\r\n        });\r\n        var destinations = dests.join(placesSeparator);\r\n        var params = { origins: origins, destinations: destinations, key: GOOGLE_API_KEY, mode: this.state.transportMode };\r\n\r\n        //console.log(params);\r\n        axios.get('http://localhost:5000/matrix',\r\n            { params },\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(resp => {\r\n                var matrix = resp.data;\r\n                //console.log(matrix);\r\n                for (let i = 0; i < matrix.length; i++) {\r\n                    //console.log(matrix[i]);\r\n                    if (matrix[i].result.status === 'OK') {\r\n                        colorPlaces[i].distance = matrix[i].result.distance.text;\r\n                        colorPlaces[i].distanceValue = matrix[i].result.distance.value;\r\n                        colorPlaces[i].duration = matrix[i].result.duration.text;\r\n                        colorPlaces[i].durationValue = matrix[i].result.duration.value;\r\n                    } else {\r\n                        colorPlaces[i].duration = '';\r\n                    }\r\n                }\r\n                colorPlaces.sort(this.dynamicSort(\"distanceValue\"));\r\n                this.setState({ colorPlaces: colorPlaces });\r\n            });\r\n    }\r\n\r\n    handleHotelSelection = (event) => {\r\n        var selected = event.target.value;\r\n        if (selected !== '' && selected !== this.state.hotel) {\r\n            this.setState({ hotel: event.target.value });\r\n            var selectedHotel = { id: this.props.tripId, placeId: event.target.value };\r\n            if (this.state.hotel === '') {\r\n                axios.post('http://localhost:5000/hotels', selectedHotel)\r\n                    .then(res => {\r\n                        console.log(\"savedHotel\");\r\n                    });\r\n            } else {\r\n                axios.put('http://localhost:5000/hotels/' + this.props.tripId, selectedHotel)\r\n                    .then(res => {\r\n                        console.log(\"updatedHotel\");\r\n                    });\r\n            }\r\n        }\r\n    };\r\n\r\n    dynamicSort(property) {\r\n        var sortOrder = 1;\r\n        if (property[0] === \"-\") {\r\n            sortOrder = -1;\r\n            property = property.substr(1);\r\n        }\r\n        return function (a, b) {\r\n            /* next line works with strings and numbers, \r\n             * and you may want to customize it to your needs\r\n             */\r\n            var aval = a[property];\r\n            var bval = b[property];\r\n            if (aval === undefined) {\r\n                aval = 'zzzzzz';\r\n            } if (bval === undefined) {\r\n                bval = 'zzzzzz';\r\n            }\r\n            var result = (aval < bval) ? -1 : (aval > bval) ? 1 : 0;\r\n\r\n            return result * sortOrder;\r\n        }\r\n    }\r\n\r\n    placeSelected = (event, place) => {\r\n        var data = [...this.state.colorPlaces];\r\n        var index = data.findIndex(obj => obj.id === place.id);\r\n        data.splice(index, 1);\r\n        this.setState({ colorPlaces: data });\r\n\r\n        var opHours = place.detail.opening_hours;\r\n        place.opHours = opHours;\r\n\r\n        this.setState({ origin: place });\r\n        if (data.length > 0) {\r\n            this.computeDistances(place, data);\r\n        }\r\n\r\n        var path = [...this.state.path];\r\n        var intervals = [...this.state.selectedIntervals];\r\n        var intindex = intervals.findIndex(obj => obj.placeId === place.id);\r\n        if (intindex === -1) {\r\n            if (path.length === 1) {\r\n                place.canSchedule = true;\r\n            } else {\r\n                if (this.computePlacesToSchedule() === 0) {\r\n                    place.canSchedule = true;\r\n                } else {\r\n                    place.canSchedule = false;\r\n                }\r\n            }\r\n            place.scheduled = false;\r\n        } else { //there is an event for this place already\r\n            place.canSchedule = false;\r\n            place.scheduled = true;\r\n        }\r\n\r\n        //console.log(place);\r\n        path.push(place);\r\n        this.setState({ path: path });\r\n        //console.log(path);\r\n    }\r\n\r\n    computePlacesToSchedule = () => {\r\n        var path = [...this.state.path];\r\n        var count = path.filter((obj) => obj.scheduled === false).length;\r\n        return count;\r\n    };\r\n\r\n    handleModeChange = (event) => {\r\n        this.setState({ transportMode: event.target.value });\r\n    };\r\n\r\n    handleDateChange = (event) => {\r\n        this.setState({ colorDate: event.target.value });\r\n        var colorMoment = moment(event.target.value.split(\"-\")[1].trim(), 'DD/MM/YYYY');\r\n        this.setState({ colorMoment: colorMoment });\r\n    };\r\n\r\n    handleDeleteFromPath = (event, place) => {\r\n        var data = [...this.state.path];\r\n        var newOrigin = data[data.length - 2];\r\n\r\n        if (place.canSchedule || this.computePlacesToSchedule() === 0) {\r\n            var events = [...this.state.selectedIntervals];\r\n            var index = events.findIndex(obj => obj.placeId == data[data.length - 2].id);\r\n            if (index === -1) {\r\n                data[data.length - 2].canSchedule = true;\r\n            }\r\n        }\r\n\r\n        data.splice(data.length - 1, 1);\r\n        this.setState({ path: data });\r\n\r\n        var colorPlaces = [...this.state.colorPlaces];\r\n        colorPlaces.push(place);\r\n        this.setState({ colorPlaces: colorPlaces });\r\n        this.setState({ origin: newOrigin });\r\n        this.computeDistances(newOrigin, colorPlaces);\r\n\r\n\r\n    }\r\n\r\n    scheduleVisit = (event, place) => {\r\n        var data = [...this.state.path];\r\n        var index = data.findIndex(obj => obj.id === place.id);\r\n        this.setState({ placeToSchedule: data[index] });\r\n        this.setState({ parentOfPlace: data[index - 1] });\r\n        this.setState({ showModal: true });\r\n\r\n        //add duration delay\r\n        if (!this.state.addedDelta) {\r\n            var minima = this.state.minimumHour;\r\n            var deltaMinima = moment(this.state.colorMoment.format('yyyy-MM-DD') + ' ' + minima);\r\n            var minutes = parseInt(data[index].duration.split(\" \")[0]);\r\n            var newMinima = deltaMinima.add(minutes, 'minutes').format('HH:mm');\r\n            this.setState({ minimumHour: newMinima });\r\n            this.setState({ addedDelta: true });\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <CustomModal end={this.props.lastDay} start={this.state.colorMoment} show={this.state.showModal} onSave={this.handleSelect} onModalClose={this.onModalClose}\r\n                    placeToSchedule={this.state.placeToSchedule} parentOfPlace={this.state.parentOfPlace} minimumHour={this.state.minimumHour} />\r\n                <CalendarModal show={this.state.showCalendarModal} onSave={this.handleCalendarSave} onModalClose={this.onCalendarModalClose}\r\n                    minimumHour={this.state.minimumCalendarHour} unit={this.state.unit} key={this.state.minimumCalendarHour} />\r\n                <div className=\"container-fluid\">\r\n                    <Row>\r\n                        <Col xs={12} xl={9}>\r\n                            <Row >\r\n                                <WeekCalendar\r\n                                    dayFormat='dd, DD/MM'\r\n                                    firstDay={this.props.firstDay}\r\n                                    numberOfDays={this.props.numOfDays}\r\n                                    selectedIntervals={this.state.selectedIntervals}\r\n                                    onIntervalSelect={this.handleSelect}\r\n                                    onIntervalUpdate={this.handleEventUpdate}\r\n                                    onIntervalRemove={this.handleEventRemove}\r\n                                    scaleUnit={this.state.unit}\r\n                                    modalComponent={CustomModalForCalendar}\r\n                                    eventComponent={CustomEvent}\r\n                                    scaleFormat='hh:mm a'\r\n                                    startTime={moment({ h: this.state.calendarStart.h, m: this.state.calendarStart.m })}\r\n                                />\r\n                            </Row >\r\n\r\n                            <br />\r\n                            <Row >\r\n                                <div className=\"ruta roboto\" style={{ fontSize: '13px' }}>\r\n                                    <h1><span>\r\n                                        {popover(\"En esta sección se muestran en orden los lugares que vas a visitar en un día específico. Puedes agregarlos al calendario teniendo en cuenta el tiempo de trayecto.\")}\r\n                                        Ruta ({this.state.colorDate})\r\n                                    </span></h1>\r\n                                    <p className=\"duracion\"> {this.state.path.length > 1 ? 'Tiempo total en trayectos: ' + ((this.state.path.reduce((a, b) => +a + +b.durationValue, 0)) / 60.0).toFixed(2) + ' minutos' : ''} </p>\r\n                                    <ListGroup horizontal style={{ marginLeft: '20px', overflowX: 'auto', whiteSpace: 'nowrap', overflowY: 'hidden' }}>\r\n                                        {this.state.path.map((place) =>\r\n                                            <ListGroup.Item style={{ padding: '0', border: 'none' }} key={place.id}>\r\n                                                <ListGroup>\r\n                                                    <ListGroup.Item>\r\n\r\n                                                        {place.id === this.state.hotel ? 'Hotel' : place.name} &nbsp;\r\n\r\n                                                        <button type=\"button\" className=\"btn btn-danger float-right\" aria-label=\"Close\"\r\n                                                            style={{\r\n                                                                padding: '0 4px 0 4px', fontSize: '13px', marginLeft: '10px',\r\n                                                                display: place.id === this.state.hotel || place.id !== this.state.origin.id ? 'none' : '',\r\n                                                            }}\r\n                                                            onClick={e => this.handleDeleteFromPath(e, place)}>X</button>\r\n\r\n                                                    </ListGroup.Item>\r\n                                                    <ListGroup.Item style={{ display: place.duration !== undefined ? '' : 'none' }}>\r\n                                                        Trayecto: {place.duration} - {place.distance}\r\n                                                    </ListGroup.Item>\r\n                                                    <ListGroup.Item style={{ display: place.id === this.state.hotel || place.canSchedule ? 'none' : '' }}>\r\n                                                        {place.scheduled ? <p className=\"center\" style={{ marginBottom: '0' }}>Agendado</p> :\r\n                                                            <p>{place.detail.opening_hours.weekday_text[parseInt(this.state.colorMoment.day() === 0 ? 6 : this.state.colorMoment.day() - 1)]}</p>\r\n                                                        }\r\n\r\n                                                    </ListGroup.Item>\r\n                                                    <ListGroup.Item style={{ display: place.id === this.state.hotel || !place.canSchedule ? 'none' : '' }}>\r\n                                                        <button type=\"button\" className=\"btn btn-success\" aria-label=\"Close\"\r\n                                                            style={{\r\n                                                                padding: '0 4px 0 4px', fontSize: '13px', width: '100%'\r\n                                                            }}\r\n                                                            onClick={e => this.scheduleVisit(e, place)}>Agendar</button>\r\n                                                    </ListGroup.Item>\r\n\r\n                                                </ListGroup>\r\n                                            </ListGroup.Item>\r\n                                        )}\r\n                                    </ListGroup>\r\n\r\n\r\n\r\n                                </div>\r\n\r\n                            </Row >\r\n                        </Col>\r\n                        <Col xs={12} xl={3}>\r\n                            <div className=\"div-border\">\r\n                                <h4>\r\n                                    Crear una ruta\r\n                                    <button type=\"button\" className=\"float-right\" style={{ backgroundColor: 'white', borderStyle: 'none' }} onClick={this.openCalendarModal}>\r\n                                        <BsFillGearFill className=\"hover-button\" color=\"grey\" size=\"1.3em\" />\r\n                                    </button>\r\n                                </h4>\r\n                                <div className=\"form-group\">\r\n                                    <label>\r\n                                        {popover(\"Seleccione el lugar en el que se hospedará. Este será el punto de partida de cada día en la ruta.\")}\r\n                                        Hotel\r\n                                    </label>\r\n                                    <Form.Select aria-label=\"Default select example\" id=\"hotel\" onChange={e => this.handleHotelSelection(e)} value={this.state.hotel}>\r\n                                        <option value=''>Configura tu hotel</option>\r\n                                        {this.state.myPlaces.map((place) =>\r\n                                            <option value={place.id} key={place.id}>{place.name}</option>\r\n                                        )}\r\n                                    </Form.Select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>\r\n                                        {popover(\"El tiempo de recorrido entre lugares se calculará teniendo en cuenta el medio de transporte.\")}\r\n                                        Medio de transporte\r\n                                    </label>\r\n                                    <Form.Select aria-label=\"Default select example\" onChange={e => this.handleModeChange(e)} value={this.state.transportMode}>\r\n                                        <option value='driving'>Vehículo</option>\r\n                                        <option value='walking'>A pie</option>\r\n                                        <option value='bicycling'>Bicicleta</option>\r\n                                        <option value='transit'>Transporte público</option>\r\n                                    </Form.Select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label >\r\n                                        {popover(\"Al seleccionar un lugar se muestran los lugares que agrupó por ese mismo color.\")}\r\n                                        Selecciona un color\r\n                                    </label>\r\n                                    <TwitterPicker id=\"colors\" width=\"100%\" colors={this.state.colors} color={this.state.background} onChange={e => this.handleChangeComplete(e)} />\r\n                                </div>\r\n\r\n                                <div className=\"form-group\">\r\n                                    <label>\r\n                                        {popover(\"Seleccione una fecha en la que desearía visitar todos estos lugares. Al agregar los eventos al calendario, se pondrán en esa fecha.\")}\r\n                                        Asignar día para este color\r\n                                    </label>\r\n                                    <Form.Select aria-label=\"Default select example\" onChange={e => this.handleDateChange(e)} value={this.state.colorDate}>\r\n                                        {this.state.listOfDates.map((date) =>\r\n                                            <option value={date} key={date}>{date}</option>\r\n                                        )}\r\n                                    </Form.Select>\r\n                                </div>\r\n\r\n                                <div className=\"form-group\" style={{ display: this.state.colorPlaces.length > 0 ? '' : 'none' }}>\r\n                                    <label >\r\n                                        {popover(\"Seleccione el primer lugar a visitar. Las distancias y tiempos de recorrido se actualizarán teniendo como origen el lugar seleccionado. De esta manera puede planear su ruta acortando trayectos.\")}\r\n                                        Selecciona un lugar para agregar un lugar a la ruta\r\n                                    </label>\r\n                                    <div style={{ overflowY: 'scroll', height: '32vh', border: '1px solid' }}>\r\n                                        <ListGroup id=\"places\">\r\n                                            {this.state.colorPlaces.map((place, index) =>\r\n                                                <ListGroup.Item action style={{ marginBottom: '1px' }} key={index} onClick={e => this.placeSelected(e, place)}>\r\n                                                    {place.name} ({place.duration} - {place.distance} desde {this.state.origin.name} , horario de {place.detail.opening_hours.weekday_text[parseInt(this.state.colorMoment.day() === 0 ? 6 : this.state.colorMoment.day() - 1)]})\r\n                                                </ListGroup.Item>\r\n\r\n                                            )}\r\n                                        </ListGroup>\r\n                                    </div>\r\n                                </div>\r\n\r\n\r\n\r\n                            </div>\r\n                        </Col>\r\n                    </Row >\r\n\r\n                </div >\r\n            </>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport Banner from \"../Banner\";\r\nimport moment from 'moment';\r\nimport Calendario from \"./Calendario\";\r\nimport configureStore from '../../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nexport default class Itinerario extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      tripId: '',\r\n      startDate: new Date(),\r\n    };\r\n\r\n    this.renderCalendar = this.renderCalendar.bind(this);\r\n  }\r\n  componentDidMount() {\r\n    const trip = store.getState().trip.selectedTrip;\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n      this.setState({ tripId: trip.id });\r\n      this.setState({ startDate: trip.calendar.startDate });\r\n      this.setState({ endDate: trip.calendar.endDate });\r\n      var a = moment(trip.calendar.startDate);\r\n      var b = moment(trip.calendar.endDate);\r\n      var numDays = b.diff(a, 'days') + 1;\r\n      this.setState({ numOfDays: numDays });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n  }\r\n\r\n  renderCalendar() {\r\n    return (<Calendario\r\n      firstDay={moment(this.state.startDate)}\r\n      lastDay={moment(this.state.endDate)}\r\n      numOfDays={this.state.numOfDays}\r\n      tripId={this.state.tripId} />);\r\n  }\r\n\r\n  render() {\r\n    const numberOfDays = this.state.numOfDays\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Itinerario</li>\r\n          </ol>\r\n        </div>\r\n        <div>\r\n          {numberOfDays !== undefined ? this.renderCalendar() : (\r\n            <span>Cargando...</span>)}\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n  }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nclass BudgetModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            errors: {},\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let errors = {};\r\n        let formIsValid = true;\r\n\r\n        if (this.name.value === '') {\r\n            formIsValid = false;\r\n            errors[\"name\"] = \"Ingrese el nombre del elemento\";\r\n        }\r\n\r\n        if (this.price.value === '') {\r\n            formIsValid = false;\r\n            errors[\"price\"] = \"Ingrese el precio del elemento\";\r\n        } else if (parseInt(this.price.value <= 0)) {\r\n            formIsValid = false;\r\n            errors[\"price\"] = \"El precio debe ser un valor positivo\";\r\n        }\r\n\r\n        if (this.quantity.value === '') {\r\n            formIsValid = false;\r\n            errors[\"quantity\"] = \"Ingrese la cantidad del elemento\";\r\n        } else if (parseInt(this.quantity.value <= 0)) {\r\n            formIsValid = false;\r\n            errors[\"quantity\"] = \"La cantidad debe ser un valor positivo\";\r\n        }\r\n\r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n    }\r\n\r\n    handleSave = () => {\r\n        const objName = this.name.value;\r\n        const objDesc = this.description.value;\r\n        const objPrice = this.price.value;\r\n        const objQuantity = this.quantity.value;\r\n        if (this.handleValidation()) {\r\n            this.handleClose();\r\n            var newObj = {};\r\n            if (this.props.toEdit !== undefined) {\r\n                newObj = {\r\n                    id: this.props.toEdit.id,\r\n                    name: objName,\r\n                    price: objPrice,\r\n                    description: objDesc,\r\n                    quantity: objQuantity,\r\n                    ignore: this.props.toEdit.ignore,\r\n                };\r\n                this.props.handleUpdate(newObj);\r\n            } else {\r\n                newObj = {\r\n                    name: objName,\r\n                    price: objPrice,\r\n                    description: objDesc,\r\n                    quantity: objQuantity,\r\n                    ignore: false,\r\n                };\r\n                this.props.handleSave(newObj);\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    handleShow = () => {\r\n        this.props.handleShow(true);\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.handleShow(false);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.show} onHide={this.handleClose}\r\n                backdrop=\"static\"\r\n                keyboard={false}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Agregar elemento al presupuesto</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Nombre</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"Nombre del elemento\" ref={el => this.name = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.name : ''} maxLength=\"30\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"name\"]}</span>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Descripción</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"Descripción del elemento\" ref={el => this.description = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.description : ''} maxLength=\"30\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"description\"]}</span>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Precio</Form.Label>\r\n                            <Form.Control type=\"number\" placeholder=\"Precio del objeto\" ref={el => this.price = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.price : ''} min=\"1\" step=\"any\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"price\"]}</span>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Cantidad</Form.Label>\r\n                            <Form.Control type=\"number\" placeholder=\"Cantidad\" ref={el => this.quantity = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.quantity : ''} min=\"1\" step=\"any\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"quantity\"]}</span>\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                        Close\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={this.handleSave}>\r\n                        {this.props.toEdit !== undefined ? 'Editar' : 'Agregar'}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default BudgetModal;","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport Button from 'react-bootstrap/Button';\r\n\r\nexport default class ChangesSavedModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            \r\n        };\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.props.handleShow(false);\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.showSaved}\r\n                onHide={this.handleClose}\r\n                backdrop=\"static\"\r\n                keyboard={false} >\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>{this.props.title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    Cambios guardados\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"primary\" onClick={this.handleClose}>Ok</Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport Banner from \"./Banner\";\r\nimport Form from 'react-bootstrap/Form';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport ProgressBar from 'react-bootstrap/ProgressBar';\r\nimport Table from 'react-bootstrap/Table';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { FaPlus, FaSave, FaTrashAlt, FaRegEyeSlash, FaRegEye, FaPen, FaQuestionCircle } from \"react-icons/fa\";\r\nimport BudgetModal from './modals/BudgetModal';\r\nimport axios from 'axios';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport ChangesSavedModal from './modals/ChangesSavedModal';\r\nimport { Prompt } from 'react-router-dom';\r\nimport configureStore from '../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nconst popover = (msg) => (\r\n  <OverlayTrigger\r\n    placement=\"bottom\"\r\n    delay={{ show: 250, hide: 200 }}\r\n    overlay={<Tooltip>{msg}</Tooltip>}\r\n  >\r\n    <button type=\"button\" style={{ backgroundColor: 'white', borderStyle: 'none' }}><FaQuestionCircle color=\"grey\" size=\"1.3em\" />\r\n    </button>\r\n\r\n  </OverlayTrigger>\r\n);\r\n\r\nexport default class Presupuesto extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      val: 5000,\r\n      total: 2800,\r\n      elements: [\r\n        {\r\n          id: 1,\r\n          name: 'Comida',\r\n          description: 'Costo diario',\r\n          price: 100,\r\n          quantity: 10,\r\n          total: 1000,\r\n          ignore: false\r\n        }, {\r\n          id: 2,\r\n          name: 'Entretenimiento',\r\n          description: 'Costo diario',\r\n          price: 40,\r\n          quantity: 10,\r\n          total: 400,\r\n          ignore: false\r\n        }, {\r\n          id: 3,\r\n          name: 'Hotel',\r\n          description: 'Habitación',\r\n          price: 1400,\r\n          quantity: 1,\r\n          total: 1400,\r\n          ignore: false\r\n        }\r\n      ],\r\n      show: false,\r\n      toEdit: undefined,\r\n      trip: {},\r\n      showSaved: false,\r\n      localCurrency: 1,\r\n      shouldBlockNavigation: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    const trip = store.getState().trip.selectedTrip;\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n\r\n    //create empty object if necessary\r\n    var tripId = trip.id;\r\n    axios.get('http://localhost:5000/budgets/' + tripId, //proxy uri\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }).then(res => {\r\n        const resp = res.data;\r\n        console.log(resp);\r\n        if (resp.length === 0) { //there is nothing, so post\r\n          var newObj = { tripId: tripId, val: this.state.val, total: this.state.total, elements: this.state.elements, localCurrency: this.state.localCurrency };\r\n          axios.post('http://localhost:5000/budgets', newObj)\r\n            .then(res => {\r\n              console.log(\"savedNewBudget\");\r\n            });\r\n        } else {\r\n          this.setState({ val: resp[0].val, total: resp[0].total, elements: resp[0].elements, localCurrency: resp[0].localCurrency });\r\n        }\r\n      });\r\n  }\r\n\r\n  componentDidUpdate = () => {\r\n    if (this.state.shouldBlockNavigation) {\r\n      window.onbeforeunload = () => true\r\n    } else {\r\n      window.onbeforeunload = undefined\r\n    }\r\n  }\r\n\r\n  handleValChange = (event) => {\r\n    this.setState({ val: parseInt(event.target.value), shouldBlockNavigation: true });\r\n  }\r\n\r\n  handlCurrencyChange = (event) => {\r\n    if (parseInt(event.target.value) > 0) {\r\n      this.setState({ localCurrency: parseInt(event.target.value) });\r\n    } else {\r\n      this.setState({ localCurrency: 1 });\r\n    }\r\n    this.setState({ shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleEdit = (event, id) => {\r\n    var data = [...this.state.elements];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    this.setState({ toEdit: data[index], show: true });\r\n  }\r\n\r\n  handleUpdate = (edited) => {\r\n    edited.total = parseInt(edited.price) * parseInt(edited.quantity);\r\n    var data = [...this.state.elements];\r\n    var index = data.findIndex(obj => obj.id === edited.id);\r\n    data[index] = edited;\r\n    var newTotal = data.filter(({ ignore }) => ignore === false).reduce((a, b) => a + parseInt(b.total), 0);\r\n    this.setState({ elements: data, toEdit: undefined, total: newTotal });\r\n    this.setState({ shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleIgnore = (event, id) => {\r\n    var data = [...this.state.elements];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    data[index].ignore = !data[index].ignore;\r\n    var newTotal = data.filter(({ ignore }) => ignore === false).reduce((a, b) => a + parseInt(b.total), 0);\r\n    this.setState({ elements: data, total: newTotal });\r\n    this.setState({ shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleDelete = (event, id) => {\r\n    var data = [...this.state.elements];\r\n    var index = data.findIndex(obj => obj.id === id);\r\n    var newTotal = data.filter(({ ignore }) => ignore === false).reduce((a, b) => a + parseInt(b.total), 0);\r\n    data.splice(index, 1);\r\n\r\n    data.forEach(function (row, index) {\r\n      row.id = index;\r\n    });\r\n\r\n    if (data.length === 0) {\r\n      newTotal = 0;\r\n    }\r\n    this.setState({ elements: data, total: newTotal });\r\n    this.setState({ shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleSave = (obj) => {\r\n    var data = this.state.elements;\r\n    obj.total = parseInt(obj.price) * parseInt(obj.quantity);\r\n    obj.id = data.length;\r\n    data.push(obj);\r\n    var newTotal = data.filter(({ ignore }) => ignore === false).reduce((a, b) => a + parseInt(b.total), 0);\r\n    this.setState({ elements: data, total: newTotal });\r\n    this.setState({ shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleShow = (s) => {\r\n    this.setState({ show: s, toEdit: undefined });\r\n  }\r\n\r\n  handleSaveChanges = () => {\r\n    document.querySelectorAll(\".tooltip\").forEach(element => {\r\n      element.style.display = 'none';\r\n    });\r\n    var tripId = this.state.trip.id;\r\n    var newObj = { val: this.state.val, total: this.state.total, elements: this.state.elements, localCurrency: this.state.localCurrency };\r\n    axios.put('http://localhost:5000/budgets/' + tripId, newObj)\r\n      .then(res => {\r\n        console.log(\"updated budget\");\r\n        this.setState({ showSaved: true });\r\n        this.setState({ shouldBlockNavigation: false });\r\n      });\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ showSaved: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Presupuesto</li>\r\n          </ol>\r\n        </div>\r\n\r\n        <Prompt\r\n          when={this.state.shouldBlockNavigation}\r\n          message='Hay cambios sin guardar. ¿Desea salir sin guardarlos?'\r\n        />\r\n\r\n        <BudgetModal show={this.state.show} handleSave={this.handleSave} handleShow={this.handleShow} toEdit={this.state.toEdit} handleUpdate={this.handleUpdate} />\r\n\r\n        <ChangesSavedModal title={'Presupuesto'} showSaved={this.state.showSaved} handleShow={this.handleClose} />\r\n\r\n        <div className=\"pcontainer container-fluid\">\r\n          <Form style={{ paddingTop: '10px' }}>\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formPlaintextPassword\">\r\n\r\n              <Form.Label column xs={6} md=\"2\">\r\n                {popover(\"Ingrese un estimado de lo que planea gastar en el viaje. El avance se calcula con respecto a esto.\")}\r\n                Presupuesto objetivo\r\n              </Form.Label>\r\n              <Col xs={6} md=\"2\">\r\n                <Form.Control type=\"number\" placeholder=\"$ Ingrese el presupuesto inicial\" value={this.state.val} onChange={this.handleValChange} />\r\n              </Col>\r\n              <Col xs={12} md=\"8\">\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 250, hide: 200 }}\r\n                  overlay={<Tooltip>Porcentaje del presupuesto objetivo gastado.</Tooltip>}\r\n                >\r\n                  <ProgressBar animated\r\n                    now={this.state.val === 0 ? 50 : (this.state.total / this.state.val) * 100.0}\r\n                    label={this.state.val === 0 ? 'Porcentaje gastado del presupuesto' : `${((this.state.total / this.state.val) * 100.0).toFixed(2)}%`}\r\n                    style={{ height: '38px' }} />\r\n\r\n                </OverlayTrigger>\r\n              </Col>\r\n            </Form.Group>\r\n            <Form.Group as={Row} className=\"mb-3\" controlId=\"formPlaintextPassword\">\r\n              <Form.Label column xs={6} md=\"2\">\r\n                {popover(\"Suma de los costos totales de los elementos en la tabla.\")}\r\n                Costo total del viaje\r\n\r\n              </Form.Label>\r\n              <Col xs={6} md=\"2\">\r\n                <Form.Control plaintext readOnly value={'$' + this.state.total.toLocaleString()} />\r\n              </Col>\r\n\r\n              <Form.Label column xs={6} md=\"2\">\r\n                {popover(\"Si ingresó la tabla en una moneda extranjera, puede ingresar aquí a cuanto equivale una (1) unidad en su moneda local. (Por ejemplo ingrese 30 si la tabla está en dólares y 1 dolar equivale a 30 en su moneda local)\")}\r\n\r\n                Convertir a moneda local\r\n              </Form.Label>\r\n              <Col xs={6} md=\"2\">\r\n                <Form.Control type=\"number\" placeholder=\"$ Ingrese el valor de conversión\" value={this.state.localCurrency} onChange={this.handlCurrencyChange} />\r\n              </Col>\r\n\r\n              <Form.Label column xs={6} md=\"2\">\r\n                Costo total en moneda local\r\n              </Form.Label>\r\n              <Col xs={6} md=\"2\">\r\n                <Form.Control plaintext readOnly value={'$' + (this.state.total * this.state.localCurrency).toLocaleString()} />\r\n              </Col>\r\n            </Form.Group>\r\n          </Form>\r\n          <hr />\r\n          <Form.Group as={Row} className=\"mb-3\" controlId=\"formPlaintextPassword\">\r\n            <Form.Label column xs={2} md=\"2\">\r\n              {popover(\"Dinero que queda del presupuesto objetivo.\")}\r\n              Dinero restante\r\n\r\n            </Form.Label>\r\n            <Col xs={2} md=\"2\">\r\n              <Form.Control plaintext readOnly value={'$' + (this.state.val - this.state.total).toLocaleString()} />\r\n            </Col>\r\n\r\n            <Col xs={8} md=\"8\">\r\n              <div className=\"inline float-right\">\r\n\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 250, hide: 200 }}\r\n                  overlay={<Tooltip>Guardar la tabla. Si no se guarda, se descartarán los cambios al salir de la pestaña.</Tooltip>}\r\n                >\r\n                  <Button variant=\"success\" className=\"inline\" onClick={this.handleSaveChanges} disabled={!this.state.shouldBlockNavigation} >\r\n                    <FaSave style={{ marginRight: '10px' }} />\r\n                    Guardar cambios\r\n                  </Button>\r\n\r\n                </OverlayTrigger>\r\n\r\n                <OverlayTrigger\r\n                  placement=\"bottom\"\r\n                  delay={{ show: 250, hide: 200 }}\r\n                  overlay={<Tooltip>Agregar un elemento a la tabla.</Tooltip>}\r\n                >\r\n                  <Button variant=\"primary\" className=\"inline float-right\" onClick={this.handleShow}>\r\n                    <FaPlus style={{ marginRight: '10px' }} />\r\n                    Agregar elemento\r\n                  </Button>\r\n\r\n                </OverlayTrigger>\r\n\r\n              </div>\r\n\r\n            </Col>\r\n          </Form.Group>\r\n\r\n          <Table striped bordered hover>\r\n            <thead>\r\n              <tr>\r\n                <th>Elemento</th>\r\n                <th>Descripción</th>\r\n                <th>Costo</th>\r\n                <th>Cantidad</th>\r\n                <th>Total</th>\r\n                <th>\r\n                  {popover(\"Puede editar el elemento, ignorar el elemento (para no tenerlo en cuenta en el total) o eliminarlo de la tabla.\")}\r\n                  Acciones\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.state.elements.map((o, index) =>\r\n                <tr key={o.name} style={{ backgroundColor: o.ignore ? 'grey' : '' }}>\r\n                  <td>{o.name}</td>\r\n                  <td>{o.description}</td>\r\n                  <td>${parseInt(o.price).toLocaleString()}</td>\r\n                  <td>{o.quantity}</td>\r\n                  <td>${parseInt(o.total).toLocaleString()}</td>\r\n                  <td>\r\n\r\n                    <div id=\"wrap\">\r\n                      <div id=\"left\">\r\n                        <Button variant=\"info\" className=\"center\" onClick={e => this.handleEdit(e, index)}>\r\n                          <FaPen />\r\n                        </Button></div>\r\n                      <div id=\"left\"><Button variant=\"secondary\" className=\"center\" onClick={e => this.handleIgnore(e, index)}>\r\n                        {o.ignore ? <FaRegEye /> : <FaRegEyeSlash />}\r\n                      </Button></div>\r\n                      <div id=\"right\"><Button variant=\"danger\" className=\"center\" onClick={e => this.handleDelete(e, index)}>\r\n                        <FaTrashAlt />\r\n                      </Button></div>\r\n                    </div>\r\n\r\n                  </td>\r\n                </tr>\r\n              )}\r\n\r\n            </tbody>\r\n          </Table>\r\n\r\n\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Banner from \"./Banner\"\r\nexport default class Documentos extends React.Component {\r\n  componentDidMount() {\r\n  }\r\n  state = {\r\n    \"restaurantes\": []\r\n  };\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history}/>\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item\">Información útil</li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Documentos</li>\r\n          </ol>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Button from 'react-bootstrap/Button'\r\nimport Form from 'react-bootstrap/Form'\r\n\r\nclass ListModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            errors: {},\r\n        };\r\n    }\r\n\r\n    handleValidation() {\r\n        let errors = {};\r\n        let formIsValid = true;\r\n    \r\n        if (this.name.value === '') {\r\n          formIsValid = false;\r\n          errors[\"name\"] = \"Ingrese el nombre del objeto\";\r\n        }\r\n    \r\n        if (this.price.value === '') {\r\n          formIsValid = false;\r\n          errors[\"price\"] = \"Ingrese el precio del objeto\";\r\n        }\r\n    \r\n        this.setState({ errors: errors });\r\n        return formIsValid;\r\n      }\r\n\r\n    handleSave = () => {\r\n        const objName = this.name.value;\r\n        const objPrice = this.price.value;\r\n        const objLink = this.link.value;\r\n        if (this.handleValidation()) {\r\n            this.handleClose();\r\n            var newObj = {};\r\n            if (this.props.toEdit !== undefined) {\r\n                newObj = {\r\n                    id: this.props.toEdit.id,\r\n                    name: objName,\r\n                    price: objPrice,\r\n                    link: objLink,\r\n                    buyed: this.props.toEdit.buyed,\r\n                    ignore: this.props.toEdit.ignore,\r\n                  };\r\n                  this.props.handleUpdate(newObj);\r\n            } else {\r\n                newObj = {\r\n                    name: objName,\r\n                    price: objPrice,\r\n                    link: objLink,\r\n                    buyed: false,\r\n                    ignore: false,\r\n                  };\r\n                  this.props.handleSave(newObj);\r\n            }\r\n          }           \r\n      }\r\n    \r\n      handleShow = () => {\r\n        this.props.handleShow(true);\r\n      }\r\n    \r\n      handleClose = () => {\r\n        this.props.handleShow(false);\r\n      }\r\n\r\n    render() {\r\n        return (\r\n            <Modal show={this.props.show} onHide={this.handleClose}\r\n            backdrop=\"static\"\r\n            keyboard={false}>\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title>Agregar objeto</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Form>\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Nombre</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"Nombre del objeto\" ref={el => this.name = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.name : ''} maxLength=\"30\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"name\"]}</span>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Precio</Form.Label>\r\n                            <Form.Control type=\"number\" placeholder=\"Precio del objeto\" ref={el => this.price = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.price : ''} min=\"1\" step=\"any\" />\r\n                            <span className=\"error\" style={{ color: \"red\" }}>{this.state.errors[\"price\"]}</span>\r\n                        </Form.Group>\r\n\r\n                        <Form.Group className=\"mb-3\" >\r\n                            <Form.Label>Link (si aplica)</Form.Label>\r\n                            <Form.Control type=\"text\" placeholder=\"Link\" ref={el => this.link = el} defaultValue={this.props.toEdit !== undefined ? this.props.toEdit.link : ''}/>\r\n                        </Form.Group>\r\n\r\n                    </Form>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                        Close\r\n                    </Button>\r\n                    <Button variant=\"primary\" onClick={this.handleSave}>\r\n                        {this.props.toEdit !== undefined ? 'Editar' : 'Agregar'}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ListModal;","import React from 'react';\r\nimport Button from 'react-bootstrap/Button'\r\nimport { FaPlus, FaSave, FaTrashAlt, FaRegEyeSlash, FaRegEye, FaPen, FaQuestionCircle } from \"react-icons/fa\";\r\nimport ListModal from '../modals/ListModal';\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport Table from 'react-bootstrap/Table';\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport { Prompt } from 'react-router-dom';\r\nimport ChangesSavedModal from '../modals/ChangesSavedModal';\r\n\r\nconst popover = (msg) => (\r\n    <OverlayTrigger\r\n        placement=\"bottom\"\r\n        delay={{ show: 250, hide: 200 }}\r\n        overlay={<Tooltip>{msg}</Tooltip>}\r\n    >\r\n        <button type=\"button\" style={{ backgroundColor: 'white', borderStyle: 'none' }}><FaQuestionCircle color=\"grey\" size=\"1.3em\" />\r\n        </button>\r\n\r\n    </OverlayTrigger>\r\n);\r\n\r\nclass ShopTable extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            objectsList: [],\r\n            show: false,\r\n            toEdit: undefined,\r\n            showSaved: false,\r\n            shouldBlockNavigation: false,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ objectsList: this.props.objList });\r\n    }\r\n\r\n    componentDidUpdate = () => {\r\n        if (this.state.shouldBlockNavigation) {\r\n            window.onbeforeunload = () => true\r\n        } else {\r\n            window.onbeforeunload = undefined\r\n        }\r\n    }\r\n\r\n    handleEdit = (event, id) => {\r\n        var data = [...this.state.objectsList];\r\n        var index = data.findIndex(obj => obj.id === id);\r\n        this.setState({ toEdit: data[index], show: true });\r\n    }\r\n\r\n    handleUpdate = (edited) => {\r\n        var data = [...this.state.objectsList];\r\n        var index = data.findIndex(obj => obj.id === edited.id);\r\n        data[index] = edited;\r\n        this.setState({ objectsList: data, toEdit: undefined });\r\n        this.setState({ shouldBlockNavigation: true });\r\n    }\r\n\r\n    handleIgnore = (event, id) => {\r\n        var data = [...this.state.objectsList];\r\n        var index = data.findIndex(obj => obj.id === id);\r\n        data[index].ignore = !data[index].ignore;\r\n        this.setState({ objectsList: data });\r\n        this.setState({ shouldBlockNavigation: true });\r\n    }\r\n\r\n    handleDelete = (event, id) => {\r\n        var data = [...this.state.objectsList];\r\n        var index = data.findIndex(obj => obj.id === id);\r\n        data.splice(index, 1);\r\n\r\n        data.forEach(function (row, index) {\r\n            row.id = index;\r\n        });\r\n\r\n        this.setState({ objectsList: data });\r\n        this.setState({ shouldBlockNavigation: true });\r\n    }\r\n\r\n    handlePayed = (event, id) => {\r\n        var data = [...this.state.objectsList];\r\n        var index = data.findIndex(obj => obj.id === id);\r\n        const target = event.target;\r\n        const value = target.type === 'checkbox' ? target.checked : target.value;\r\n        data[index].buyed = value;\r\n        this.setState({ objectsList: data });\r\n        this.setState({ shouldBlockNavigation: true });\r\n    }\r\n\r\n    handleSave = (obj) => {\r\n        var data = this.state.objectsList;\r\n        obj.id = data.length;\r\n        data.push(obj);\r\n        this.setState({ objectsList: data });\r\n        this.setState({ shouldBlockNavigation: true });\r\n    }\r\n\r\n    handleShow = (s) => {\r\n        this.setState({ show: s, toEdit: undefined });\r\n    }\r\n\r\n    handleClose = () => {\r\n        this.setState({ showSaved: false });\r\n    }\r\n\r\n    handleSaveChanges = () => {\r\n        this.props.saveList(this.state.objectsList, this.props.tableNumber);\r\n        this.setState({ showSaved: true });\r\n        this.setState({ shouldBlockNavigation: false });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Prompt\r\n                    when={this.state.shouldBlockNavigation}\r\n                    message='Hay cambios sin guardar. ¿Desea salir sin guardarlos?'\r\n                />\r\n\r\n                <ListModal show={this.state.show} handleSave={this.handleSave} handleShow={this.handleShow} toEdit={this.state.toEdit} handleUpdate={this.handleUpdate} />\r\n\r\n                <ChangesSavedModal title={'Lista de compras'} showSaved={this.state.showSaved} handleShow={this.handleClose} />\r\n\r\n                <Row>\r\n                    <Col  xs={6} lg={4} >  <h3>\r\n                        {popover(this.props.titleTooltip)}\r\n                        {this.props.title}\r\n                    </h3></Col>\r\n\r\n                    <Col xs={6} lg={8}>\r\n                        <div className=\"float-right\">\r\n                            <OverlayTrigger\r\n                                placement=\"bottom\"\r\n                                delay={{ show: 250, hide: 200 }}\r\n                                overlay={<Tooltip>Guardar la tabla. Si no se guarda, se descartarán los cambios al salir de la pestaña.</Tooltip>}\r\n                            >\r\n                                <Button variant=\"success\" className=\"inline\" onClick={this.handleSaveChanges} disabled={!this.state.shouldBlockNavigation}>\r\n                                    <FaSave style={{ marginRight: '10px' }} />\r\n                                    Guardar cambios\r\n                                </Button>\r\n\r\n                            </OverlayTrigger>\r\n\r\n                            <OverlayTrigger\r\n                                placement=\"bottom\"\r\n                                delay={{ show: 250, hide: 200 }}\r\n                                overlay={<Tooltip>Agregar un elemento a la tabla.</Tooltip>}\r\n                            >\r\n                                <Button variant=\"primary\" className=\"inline\" onClick={this.handleShow}>\r\n                                    <FaPlus style={{ marginRight: '10px' }} />\r\n                                    Agregar objeto\r\n                                </Button>\r\n\r\n                            </OverlayTrigger>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n\r\n                <Table striped bordered hover>\r\n                    <thead>\r\n                        <tr>\r\n                            <th style={{ width: '10%' }} >#</th>\r\n                            <th>Nombre</th>\r\n                            <th>Precio</th>\r\n                            <th>Comprado</th>\r\n                            <th>\r\n                                {popover(\"Puede editar el elemento, ignorar el elemento (para no tenerlo en cuenta en el total) o eliminarlo de la tabla.\")}\r\n                                Acciones</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {this.state.objectsList.map((o) =>\r\n                            <tr key={o.id} style={{ backgroundColor: o.ignore ? 'grey' : '' }}>\r\n                                <td>{o.id}</td>\r\n                                <td>{o.link !== '' ? <a href={o.link} target=\"_blank\" rel=\"noopener noreferrer\">{o.name}</a> : o.name}</td>\r\n                                <td>${parseInt(o.price).toLocaleString()}</td>\r\n                                <td>\r\n                                    <div className=\"form-check\">\r\n                                        <input className=\"form-check-input\" type=\"checkbox\" value=\"\" id=\"flexCheckDefault\" checked={o.buyed} onChange={e => this.handlePayed(e, o.id)} />\r\n                                    </div>\r\n                                </td>\r\n\r\n                                <td>\r\n\r\n                                    <div id=\"wrap\">\r\n                                        <div id=\"left\"><Button variant=\"info\" className=\"center\" onClick={e => this.handleEdit(e, o.id)}>\r\n                                            <FaPen />\r\n                                        </Button></div>\r\n                                        <div id=\"left\"><Button variant=\"secondary\" className=\"center\" onClick={e => this.handleIgnore(e, o.id)}>\r\n                                            {o.ignore ? <FaRegEye /> : <FaRegEyeSlash />}\r\n                                        </Button></div>\r\n                                        <div id=\"right\"><Button variant=\"danger\" className=\"center\" onClick={e => this.handleDelete(e, o.id)}>\r\n                                            <FaTrashAlt />\r\n                                        </Button></div>\r\n                                    </div>\r\n\r\n                                </td>\r\n                            </tr>\r\n                        )}\r\n\r\n                    </tbody>\r\n                </Table>\r\n                <p>Total compras: ${((this.state.objectsList.filter(({ ignore }) => ignore === false).reduce((a, b) => a + parseInt(b.price), 0))).toLocaleString()} </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ShopTable;","import React from 'react';\r\nimport Banner from \"../Banner\";\r\nimport axios from 'axios';\r\nimport Container from 'react-bootstrap/Container'\r\nimport Row from 'react-bootstrap/Row'\r\nimport Col from 'react-bootstrap/Col'\r\nimport ShopTable from './ShopTable';\r\nimport configureStore from '../../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nexport default class ListaCompras extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      trip: {},\r\n      beforeList: [],\r\n      afterList: [],\r\n      k1: 0,\r\n      k2: 1,\r\n    };\r\n  }\r\n\r\n  saveList = (objs, tableNumber) => {\r\n    var tripId = this.state.trip.id;\r\n\r\n    var newObj = {};\r\n    if (tableNumber === \"1\") {\r\n      newObj.beforeList = objs;\r\n    } else {\r\n      newObj.afterList = objs;\r\n    }\r\n\r\n    document.querySelectorAll(\".tooltip\").forEach(element => {\r\n      element.style.display = 'none';\r\n    });\r\n\r\n    axios.put('http://localhost:5000/shoppingLists/' + tripId, newObj)\r\n      .then(res => {\r\n        console.log(\"updated lists\");\r\n      });\r\n  }\r\n\r\n  componentDidMount() {\r\n    const trip = store.getState().trip.selectedTrip;\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n\r\n    //create empty object if necessary\r\n    var tripId = trip.id;\r\n    axios.get('http://localhost:5000/shoppingLists/' + tripId, //proxy uri\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }).then(res => {\r\n        const resp = res.data;\r\n        if (resp.length === 0) { //there is nothing, so post\r\n          var newObj = { tripId: tripId, beforeList: [], afterList: [] };\r\n          axios.post('http://localhost:5000/shoppingLists', newObj)\r\n            .then(res => {\r\n              console.log(\"savedNewList\");\r\n            });\r\n        } else {\r\n          this.setState({ beforeList: resp[0].beforeList, afterList: resp[0].afterList, k1: this.state.k1 + 1, k2: this.state.k2 + 1 });\r\n        }\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\">\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item\">Información útil</li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Lista de compras</li>\r\n          </ol>\r\n        </div>\r\n\r\n\r\n        <Container fluid={true}>\r\n          <Row>\r\n            <Col xs={12} xl={6}>\r\n              <ShopTable title=\"Compras antes del viaje\" tableNumber=\"1\" saveList={this.saveList} objList={this.state.beforeList} key={this.state.k1} titleTooltip=\"Objetos que desea comprar antes del viaje. Puede guardarlos en la tabla con su respectivo link de compra (si aplica) para recordar comprarlos.\" />\r\n            </Col>\r\n            <Col xs={12} xl={6}>\r\n              <ShopTable title=\"Compras durante el viaje\" tableNumber=\"2\" saveList={this.saveList} objList={this.state.afterList} key={this.state.k2} titleTooltip=\"Objetos que desea comprar durante el viaje. Puede guardarlos en la tabla con su respectivo link de compra (si aplica) para recordar comprarlos.\" />\r\n            </Col>\r\n          </Row>\r\n        </Container>\r\n\r\n\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Editable from 'react-text-content-editable'\r\n\r\nexport default class Nota extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      id: this.props.noteId,\r\n      title: this.props.title,\r\n      text: this.props.text,\r\n    };\r\n    this.contentEditable = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n  }\r\n\r\n  handleNoteEdit = (value) => {\r\n    this.setState({ title: value });\r\n    this.props.handleChange(this.state.id, value, this.state.text);\r\n  }\r\n\r\n  handleNoteEditText = (value) => {\r\n    this.setState({ text: value });\r\n    this.props.handleChange(this.state.id, this.state.title, value);\r\n  }\r\n\r\n  handleDelete = () => {\r\n    this.props.deleteNote(this.state.id);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <a>\r\n         <span id='close' onClick={this.handleDelete} >x</span>\r\n        <Editable\r\n          tag='h2'\r\n          type='text'\r\n          maxLength='20'\r\n          onChange={this.handleNoteEdit}\r\n          value={this.state.title}\r\n        />\r\n        <Editable\r\n          tag='p'\r\n          type='text'\r\n          maxLength='60'\r\n          onChange={this.handleNoteEditText}\r\n          value={this.state.text}\r\n        />\r\n      </a>\r\n\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Banner from \"../Banner\"\r\nimport OverlayTrigger from 'react-bootstrap/OverlayTrigger';\r\nimport Tooltip from 'react-bootstrap/Tooltip';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { FaPlus, FaSave } from \"react-icons/fa\";\r\nimport Nota from './Nota';\r\nimport axios from 'axios';\r\nimport ChangesSavedModal from '../modals/ChangesSavedModal';\r\nimport { Prompt } from 'react-router-dom';\r\nimport configureStore from '../../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nexport default class Notas extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      stickyNotes: [{\r\n        id: 0,\r\n        title: \"Título nota\",\r\n        text: \"Modifica este texto!\",\r\n      }],\r\n      showSaved: false,\r\n      shouldBlockNavigation: false,\r\n    };\r\n    this.contentEditable = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    const trip = store.getState().trip.selectedTrip;\r\n    if (trip !== undefined) {\r\n      this.setState({ trip: trip });\r\n    } else {\r\n      this.props.history.push('/plan');\r\n    }\r\n\r\n    //create empty object if necessary\r\n    var tripId = trip.id;\r\n    axios.get('http://localhost:5000/notes/' + tripId, //proxy uri\r\n      {\r\n        headers: {\r\n          'Content-Type': 'application/json'\r\n        }\r\n      }).then(res => {\r\n        const resp = res.data;\r\n        console.log(resp);\r\n        if (resp.length === 0) { //there is nothing, so post\r\n          var newObj = { tripId: tripId, stickyNotes: this.state.stickyNotes };\r\n          axios.post('http://localhost:5000/notes', newObj)\r\n            .then(res => {\r\n              console.log(\"savedNewNote\");\r\n            });\r\n        } else {\r\n          this.setState({ stickyNotes: resp[0].stickyNotes });\r\n        }\r\n      });\r\n  }\r\n\r\n  handleAdd = () => {\r\n    var data = [...this.state.stickyNotes];\r\n    data.push({\r\n      id: data.length,\r\n      title: \"Título nota\",\r\n      text: \"Modifica este texto!\"\r\n    });\r\n    this.setState({ stickyNotes: data, shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleDeleteNote = (id) => {\r\n    var data = [...this.state.stickyNotes];\r\n    data.splice(id, 1);\r\n\r\n    data.forEach(function (row, index) {\r\n      row.id = index;\r\n    });\r\n\r\n    this.setState({ stickyNotes: data, shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleNoteChange = (id, title, text) => {\r\n    var data = [...this.state.stickyNotes];\r\n    data[id].title = title;\r\n    data[id].text = text;\r\n    this.setState({ stickyNotes: data, shouldBlockNavigation: true });\r\n  }\r\n\r\n  handleSaveChanges = () => {\r\n    document.querySelectorAll(\".tooltip\").forEach(element => {\r\n      element.style.display = 'none';\r\n    });\r\n    var tripId = this.state.trip.id;\r\n    axios.put('http://localhost:5000/notes/' + tripId, { stickyNotes: this.state.stickyNotes })\r\n      .then(res => {\r\n        console.log(\"updated notes\");\r\n        this.setState({ showSaved: true, shouldBlockNavigation: false });\r\n      });\r\n  }\r\n\r\n  handleClose = () => {\r\n    this.setState({ showSaved: false });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container-fluid\" style={{ paddingLeft: '0px', paddingRight: '0px' }}>\r\n        <div className=\"row\" id=\"banner\">\r\n          <div className=\"col-2 col-offset-0\">\r\n            <Banner showLinks={true} history={this.props.history} />\r\n          </div>\r\n        </div>\r\n        <br></br>\r\n        <br></br>\r\n        <br></br>\r\n        <div className=\"color\">\r\n          <ol className=\"breadcrumb\" style={{ marginBottom: '0px', marginLeft: '0px' }}>\r\n            <li className=\"breadcrumb-item\"><a href=\"/\">Inicio</a></li>\r\n            <li className=\"breadcrumb-item\">Información útil</li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">Notas</li>\r\n          </ol>\r\n        </div>\r\n\r\n        <Prompt\r\n          when={this.state.shouldBlockNavigation}\r\n          message='Hay cambios sin guardar. ¿Desea salir sin guardarlos?'\r\n        />\r\n\r\n        <ChangesSavedModal title={'Notas'} showSaved={this.state.showSaved} handleShow={this.handleClose} />\r\n\r\n        <div style={{ backgroundColor: '#666', height: '70px' }}>\r\n          <div className=\"inline float-right\" style={{ paddingTop: '10px', paddingBottom: '20px' }}>\r\n\r\n            <OverlayTrigger\r\n              placement=\"bottom\"\r\n              delay={{ show: 250, hide: 200 }}\r\n              overlay={<Tooltip>Guardar las notas. Si no se guardan, se descartarán los cambios al salir de la pestaña.</Tooltip>}\r\n            >\r\n              <Button variant=\"success\" className=\"inline\" onClick={this.handleSaveChanges} disabled={!this.state.shouldBlockNavigation}>\r\n                <FaSave style={{ marginRight: '10px' }} />\r\n                Guardar cambios\r\n              </Button>\r\n\r\n            </OverlayTrigger>\r\n\r\n            <OverlayTrigger\r\n              placement=\"bottom\"\r\n              delay={{ show: 250, hide: 200 }}\r\n              overlay={<Tooltip>Agregar una nota.</Tooltip>}\r\n            >\r\n              <Button variant=\"primary\" className=\"inline float-right\" onClick={this.handleAdd}>\r\n                <FaPlus style={{ marginRight: '10px' }} />\r\n                Agregar nota\r\n              </Button>\r\n\r\n            </OverlayTrigger>\r\n\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div className=\"container-fluid notes-container\" style={{ paddingLeft: '0px', paddingRight: '0px' }}>\r\n          <ul style={{ paddingTop: '30px' }}>\r\n            {this.state.stickyNotes.map((o, index) =>\r\n              <li key={index}>\r\n                <Nota noteId={index} deleteNote={this.handleDeleteNote} handleChange={this.handleNoteChange} title={o.title} text={o.text} />\r\n              </li>\r\n            )}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}","import React from 'react';\r\nimport Container from 'react-bootstrap/Container';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport { DateRange } from 'react-date-range';\r\nimport 'react-date-range/dist/styles.css'; // main style file\r\nimport 'react-date-range/dist/theme/default.css'; // theme css file\r\nimport Select from 'react-select';\r\nimport axios from 'axios';\r\nimport AsyncSelect from 'react-select/async';\r\nimport Card from 'react-bootstrap/Card'\r\nimport Button from 'react-bootstrap/Button'\r\nimport moment from 'moment';\r\nimport 'moment/locale/es';\r\nimport Banner from './Banner';\r\nimport { connect } from 'react-redux';\r\nimport { selectedTripChanged } from \"../reducers/TripReducer\";\r\nimport configureStore from '../store';\r\n\r\nconst { store } = configureStore();\r\n\r\nclass Picker extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            calendar: {\r\n                startDate: new Date(),\r\n                endDate: new Date(),\r\n                key: 'selection'\r\n            },\r\n            countries: [],\r\n            isClearable: true,\r\n            cities: [],\r\n            isDisabled: true,\r\n            selectedCountry: '',\r\n            selectedCity: '',\r\n            invalidData: true,\r\n            numOfTrips: '',\r\n            trips: [],\r\n            userId: '',\r\n        };\r\n\r\n        this.handleSelect = this.handleSelect.bind(this);\r\n        this.handleCountrySelect = this.handleCountrySelect.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.promiseOptions = this.promiseOptions.bind(this);\r\n        this.mapOptionsToValues = this.mapOptionsToValues.bind(this);\r\n        this.handleCitySelect = this.handleCitySelect.bind(this);\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        nextState.invalidData = !(nextState.selectedCity && nextState.selectedCountry);\r\n    };\r\n\r\n    componentDidMount() {\r\n        const user = store.getState().user.user;\r\n        if (user === undefined) {\r\n            this.props.history.push('/');\r\n        }\r\n        let userID = user.sub;\r\n        this.setState({ userId: user.sub });\r\n        axios.get('http://localhost:5000/countries', //proxy uri\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(res => {\r\n                const options = res.data.map(function (row) {\r\n\r\n                    // This function defines the \"mapping behaviour\". name and title \r\n                    // data from each \"row\" from your columns array is mapped to a \r\n                    // corresponding item in the new \"options\" array\r\n\r\n                    return { value: row.code, label: row.name }\r\n                });\r\n\r\n                this.setState({ countries: options });\r\n            });\r\n\r\n        axios.get('http://localhost:5000/userTrips/' + userID, //proxy uri\r\n            {\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            }).then(res => {\r\n                var resp = res.data;\r\n                if (resp.length === 0) { //there is nothing, so post\r\n                    var newObj = { userId: userID, trips: [] };\r\n                    axios.post('http://localhost:5000/userTrips', newObj)\r\n                        .then(res => {\r\n                            console.log(\"savedNewUserTrips\");\r\n                        });\r\n                } else {\r\n                    const trips = res.data[0].trips;\r\n                    this.setState({ numOfTrips: trips.length, trips: trips });\r\n                }\r\n            });\r\n    }\r\n\r\n    handleCountrySelect(inputValue) {\r\n        if (inputValue) {\r\n            this.setState({ isDisabled: false });\r\n            this.setState({ selectedCountry: inputValue.value });\r\n        } else {\r\n            this.setState({ isDisabled: true });\r\n            this.setState({ selectedCountry: '' });\r\n        }\r\n\r\n    }\r\n\r\n    handleCitySelect(inputValue) {\r\n        if (inputValue) {\r\n            this.setState({ selectedCity: inputValue.value });\r\n        } else {\r\n            this.setState({ selectedCity: '' });\r\n        }\r\n\r\n    }\r\n\r\n    handleSelect(ranges) {\r\n        this.setState({ calendar: ranges });\r\n    }\r\n\r\n    handleSubmit(event) {\r\n        event.preventDefault();\r\n        var toSave = {\r\n            id: this.state.userId + (this.state.numOfTrips + 1).toString(),\r\n            calendar: this.state.calendar,\r\n            selectedCountry: this.state.selectedCountry,\r\n            selectedCity: this.state.selectedCity\r\n        };\r\n        axios.post('http://localhost:5000/trips', toSave)\r\n            .then(res => {\r\n                var data = this.state.trips;\r\n                data.push(toSave);\r\n                var newObj = {\r\n                    trips: data.map(a => a.id),\r\n                };\r\n                axios.put('http://localhost:5000/userTrips/' + this.state.userId, newObj)\r\n                    .then(res => {\r\n                        console.log(\"updated trips\");\r\n                        this.setState({ trips: data });\r\n                        this.props.changeTrip(toSave);\r\n                        this.props.history.push('/mytrip');\r\n                    });\r\n\r\n            });\r\n\r\n    }\r\n\r\n    selectTrip = (event, obj) => {\r\n        this.props.changeTrip(obj);\r\n        this.props.history.push('/mytrip');\r\n    }\r\n\r\n    deleteTrip = (event, obj) => {\r\n        if (window.confirm(\"¿Está seguro de que desea eliminar el viaje a \" + obj.selectedCity.split(\",\")[0] + \"?\")) {\r\n            var data = [...this.state.trips];\r\n            var index = data.findIndex(o => o.id === obj.id);\r\n            data.splice(index, 1);\r\n            axios.delete('http://localhost:5000/trips/' + obj.id)\r\n                .then(res => {\r\n                    var newObj = {\r\n                        trips: data.map(a => a.id),\r\n                    };\r\n                    axios.put('http://localhost:5000/userTrips/' + this.state.userId, newObj)\r\n                        .then(res => {\r\n                            console.log(\"updated trips\");\r\n                            this.setState({ trips: data });\r\n                        });\r\n                });\r\n        }\r\n    }\r\n\r\n    promiseOptions = (inputValue, callback) => {\r\n        if (!inputValue) {\r\n            return callback([]);\r\n        } else if (inputValue.length >= 3) {\r\n            axios.get('http://localhost:5000/countries/' + this.state.selectedCountry + '/' + inputValue, //proxy uri\r\n                {\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                }).then(res => {\r\n                    callback(this.mapOptionsToValues(res.data));\r\n                });\r\n        }\r\n    };\r\n\r\n    mapOptionsToValues = options => {\r\n        return options.map(option => ({\r\n            value: option.city + \",\" + option.latitude + \",\" + option.longitude,\r\n            label: option.city + \" - \" + option.region\r\n        }));\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Banner isLoggedIn showLinks={false} history={this.props.history} />\r\n\r\n                <div className=\"hero-container\" >\r\n                    <div className=\"hero-image\" >\r\n                        <Container fluid className=\"hero-text roboto\" >\r\n                            <Row >\r\n                                <div id=\"section1\" >\r\n                                    <div>\r\n                                        <h1 className=\"title\" > La nueva manera de planear tu viaje </h1>\r\n                                    </div>\r\n                                </div>\r\n                            </Row>\r\n                            <Row >\r\n                                <div className=\"placeform\" >\r\n                                    <form className=\"placeformform roboto\"\r\n                                        onSubmit={this.handleSubmit} >\r\n                                        <Row >\r\n                                            <Col xs={12} md={12} lg={5} > < Row > <label className=\"labelmargin\"> Fechas </label>\r\n                                            </Row >\r\n                                                <Row >\r\n                                                    <div style={{ display: 'flex', justifyContent: 'center' }}>\r\n                                                        <DateRange editableDateInputs={true}\r\n                                                            moveRangeOnFirstSelection={false}\r\n                                                            ranges={\r\n                                                                [this.state.calendar]}\r\n                                                            onChange={item => this.handleSelect(item.selection)}\r\n                                                            minDate={new Date()} />\r\n                                                    </div>\r\n                                                </Row>\r\n                                            </Col> <Col xs={0}\r\n                                                md={0}\r\n                                                lg={1} >\r\n                                            </Col>\r\n                                            <Col xs={12}\r\n                                                md={12}\r\n                                                lg={6} >\r\n                                                <Row >\r\n                                                    <label className=\"labelmargin\" > País </label>\r\n                                                </Row>\r\n                                                <Row className=\"geoInput\" >\r\n                                                    <div className=\"vertical\">\r\n                                                        <Select options={this.state.countries}\r\n                                                            isClearable={this.state.isClearable}\r\n                                                            placeholder=\"Ingresa el país destino\"\r\n                                                            onChange={this.handleCountrySelect}\r\n                                                        /> </div>\r\n\r\n                                                </Row>\r\n                                                <Row >\r\n                                                    <label className=\"labelmargin\" > Ciudad </label>\r\n                                                </Row>\r\n                                                <Row className=\"geoInput\">\r\n                                                    <div className=\"vertical\">\r\n                                                        <AsyncSelect cacheOptions loadOptions={this.promiseOptions}\r\n                                                            placeholder=\"Ingresa la ciudad destino\"\r\n                                                            isDisabled={this.state.isDisabled}\r\n                                                            onChange={this.handleCitySelect}\r\n                                                            theme={\r\n                                                                (theme) => ({\r\n                                                                    ...theme,\r\n                                                                    borderRadius: 0,\r\n                                                                    colors: {\r\n                                                                        ...theme.colors,\r\n                                                                        neutral5: 'silver',\r\n                                                                        neutral10: 'silver',\r\n                                                                        primary: 'black',\r\n                                                                    },\r\n                                                                })\r\n                                                            }\r\n                                                        /> </div>\r\n\r\n                                                </Row>\r\n                                                <Row >\r\n                                                    <button type=\"submit\"\r\n                                                        className=\"btn btn-primary submitbtn\"\r\n                                                        disabled={this.state.invalidData} > Aceptar </button>\r\n                                                </Row>\r\n                                            </Col>\r\n                                        </Row>\r\n                                    </form> </div> </Row>\r\n                        </Container>\r\n                    </div>\r\n                </div>\r\n\r\n                <div style={{ backgroundColor: 'black' }} >\r\n                    <div className=\"trips-container\" >\r\n                        <h2 className=\"left-pad\">Mis viajes</h2>\r\n                        <div className=\"left-pad\">\r\n                            <Row>\r\n                                {this.state.trips.map((o) =>\r\n                                    <Col lg={4} key={o.id}>\r\n                                        <Card style={{ marginBottom: '15px' }} >\r\n                                            <Card.Header as=\"h5\">{o.selectedCity.split(\",\")[0]}</Card.Header>\r\n                                            <Card.Body>\r\n                                                <Card.Text>\r\n                                                    {moment(o.calendar.startDate).format('DD/MMM/YYYY')} - {moment(o.calendar.endDate).format('DD/MMM/YYYY')}\r\n                                                </Card.Text>\r\n                                                <form className=\"my-2 my-lg-0 center\">\r\n                                                    <Button variant=\"primary\" onClick={e => this.selectTrip(e, o)} className=\"inline center\">Seleccionar</Button>\r\n                                                    <Button variant=\"danger\" className=\"inline center\" onClick={e => this.deleteTrip(e, o)}>\r\n                                                        Eliminar viaje\r\n                                                    </Button>\r\n                                                </form>\r\n\r\n                                            </Card.Body>\r\n                                        </Card>\r\n                                    </Col>\r\n                                )}\r\n                            </Row>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n    return {\r\n        changeTrip: (value) => dispatch(selectedTripChanged(value))\r\n    };\r\n};\r\nexport default connect(null, mapDispatchToProps)(Picker)","// This is used to determine if a user is authenticated and\r\n// if they are allowed to visit the page they navigated to.\r\n\r\n// If they are: they proceed to the page\r\n// If not: they are redirected to the login page.\r\nimport React from 'react'\r\nimport { Route } from 'react-router-dom';\r\nimport { withAuthenticationRequired } from '@auth0/auth0-react';\r\n\r\nlet loading = <div className=\"loading\">\r\n    <div className=\"loader\"></div>\r\n  </div>;\r\n\r\nconst PrivateRoute = ({ component, ...args }) => (\r\n  <Route\r\n    component={withAuthenticationRequired(component, {\r\n      onRedirecting: () => loading,\r\n    })}\r\n    {...args}\r\n  />\r\n);\r\n\r\nexport default PrivateRoute","// src/App.js\r\n\r\nimport React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport Callback from './Callback/Callback';\r\nimport './App.css';\r\nimport Principal from \"./components/Principal\";\r\nimport Mapa from \"./components/map/Mapa\";\r\nimport Itinerario from \"./components/calendar/Itinerario\";\r\nimport Presupuesto from './components/Presupuesto';\r\nimport Documentos from './components/Documentos';\r\nimport ListaCompras from './components/shopping/ListaCompras';\r\nimport Notas from './components/notas/Notas';\r\nimport Picker from './components/Picker';\r\nimport { Route } from \"react-router-dom\";\r\nimport PrivateRoute from './components/PrivateRoute';\r\nimport Banner from './components/Banner';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { useAuth0 } from '@auth0/auth0-react';\r\nimport { useDispatch } from \"react-redux\";\r\nimport { userChanged } from \"./reducers/UserReducer\";\r\nimport { selectedTripChanged } from \"./reducers/TripReducer\";\r\n\r\nfunction HomePage(props) {\r\n    const { loginWithRedirect } = useAuth0();\r\n\r\n    return (\r\n        <div className=\"container-fluid\" style={{ paddingLeft: '0px', paddingRight: '0px' }}>\r\n            <div className=\"row\" id=\"banner\">\r\n                <div className=\"col-2 col-offset-0\">\r\n                    <Banner showLinks={false} history={props.history} />\r\n                </div>\r\n            </div>\r\n            <div className=\"init-hero-image\">\r\n                <div className=\"init-hero-text\" style={{ fontFamily: 'roboto' }}>\r\n                    <img src=\"logotrip.png\" alt=\"tripplanner icon\" className=\"init-icon\" />\r\n                    <h1>Bienvenido a TriPlanner</h1>\r\n                    <p>Aquí puedes planear tu viaje de manera fácil y divertida</p>\r\n\r\n                    <div class=\"container\">\r\n                        <Row>\r\n                            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n                                <Card style={{ width: '18rem', height: '26rem' }}>\r\n                                    <Card.Img variant=\"top\" src=\"route_google_map.png\" style={{ height: '16rem' }} />\r\n                                    <Card.Body>\r\n                                        <Card.Title>Selecciona lugares</Card.Title>\r\n                                        <Card.Text>\r\n                                            Busca los lugares que quieres visitar en el mapa, guárdalos y organízalos por colores.\r\n                                        </Card.Text>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n                                <Card style={{ width: '18rem', height: '26rem' }}>\r\n                                    <Card.Img variant=\"top\" src=\"schedule.png\" style={{ height: '16rem' }} />\r\n                                    <Card.Body>\r\n                                        <Card.Title>Planea tus visitas</Card.Title>\r\n                                        <Card.Text>\r\n                                            Planea cuando quieres visitar cada lugar seleccionado, teniendo en cuenta el tiempo de transporte\r\n                                            entre lugares.\r\n                                        </Card.Text>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                            <Col className=\"page-hero d-flex align-items-center justify-content-center\">\r\n                                <Card style={{ width: '18rem', height: '26rem' }} className=\"budget-card\">\r\n                                    <Card.Img variant=\"top\" src=\"budget.png\" style={{ height: '16rem' }} />\r\n                                    <Card.Body>\r\n                                        <Card.Title>Planea tus gastos</Card.Title>\r\n                                        <Card.Text>\r\n                                            Crea listas de compras y crea un presupuesto para tu viaje.\r\n                                        </Card.Text>\r\n                                    </Card.Body>\r\n                                </Card>\r\n                            </Col>\r\n                        </Row>\r\n                    </div>\r\n\r\n                    <br />\r\n                    <p>Inicia sesión para planear tu viaje</p>\r\n                    <Button variant=\"success\" className=\"center\" onClick={() => loginWithRedirect()}>Iniciar sesión</Button>\r\n\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n\r\nfunction App(props) {\r\n    //const dispatch = useDispatch();\r\n    //dispatch(userChanged(undefined));\r\n    //dispatch(selectedTripChanged(undefined));\r\n\r\n    return (\r\n        <div>\r\n            <Route\r\n                exact\r\n                path=\"/callback\"\r\n                render={() => <Callback auth={props.auth} />}\r\n            />\r\n            <Route\r\n                exact\r\n                path=\"/\"\r\n                render={() => (\r\n                    <HomePage\r\n                        authenticated={false}\r\n                        //auth={props.auth}\r\n                        history={props.history}\r\n                    />\r\n                )}\r\n            />\r\n            <PrivateRoute path=\"/plan\" component={Picker} exact />\r\n            <PrivateRoute path=\"/mytrip\" component={Principal} exact />\r\n            <PrivateRoute path=\"/map/\" component={Mapa} exact />\r\n            <PrivateRoute path=\"/schedule\" component={Itinerario} exact />\r\n            <PrivateRoute path=\"/budget\" component={Presupuesto} exact />\r\n            <PrivateRoute path=\"/documents\" component={Documentos} exact />\r\n            <PrivateRoute path=\"/list\" component={ListaCompras} exact />\r\n            <PrivateRoute path=\"/notes\" component={Notas} exact />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default withRouter(App);","// src/auth/auth0-provider-with-history.js\r\n\r\nimport React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Auth0Provider } from '@auth0/auth0-react';\r\n\r\nconst Auth0ProviderWithHistory = ({ children }) => {\r\n  const domain = 'dev-pxvk0q3d.us.auth0.com';\r\n  const clientId = 'F7YgSVBKnopGhKfsYchWk1tSx0gBlpZM';\r\n\r\n  const history = useHistory();\r\n\r\n  const onRedirectCallback = (appState) => {\r\n    history.push(appState?.returnTo || window.location.pathname);\r\n  };\r\n\r\n  return (\r\n    <Auth0Provider\r\n      domain={domain}\r\n      clientId={clientId}\r\n      redirectUri={'http://localhost:3000/callback'}\r\n      onRedirectCallback={onRedirectCallback}\r\n    >\r\n      {children}\r\n    </Auth0Provider>\r\n  );\r\n};\r\n\r\nexport default Auth0ProviderWithHistory;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { createBrowserHistory } from 'history';\nimport App from './App';\nimport { Provider } from 'react-redux';\nimport configureStore from \"./store\";\nimport Auth0ProviderWithHistory from './Auth/auth0-provider-with-history';\nimport { PersistGate } from 'redux-persist/integration/react'\n\nconst { store, persistor } = configureStore();\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate loading={null} persistor={persistor}>\n      <Router history={createBrowserHistory}>\n        <Auth0ProviderWithHistory>\n          <App />\n        </Auth0ProviderWithHistory>\n      </Router>\n    </PersistGate>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}